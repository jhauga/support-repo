<!DOCTYPE html>
<html>
<head> <title>curl - TODO</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<link rel="stylesheet" type="text/css" href="curl.css">
<link rel="shortcut icon" href="favicon.ico">
<link rel="icon" href="logo/curl-symbol.svg" type="image/svg+xml">
<link rel="alternate" type="application/rss+xml" title="cURL Releases" href="https://github.com/curl/curl/releases.atom">
<style>
input[type=checkbox] {
    display: none;
}
ul.task-list {
    list-style-type: none;
}
</style>
</head>
<body>
<div class="main">
<div class="menu">
<a href="/docs/" class="menuitem" title="Documentation Overview">Docs Overview</a>
<div class="dropdown">
  <a class="dropbtn" href="/docs/projdocs.html">Project</a>
  <div class="dropdown-content">
    <a href="/docs/bugbounty.html">Bug Bounty</a>
    <a href="/docs/bugs.html">Bug Report</a>
    <a href="/docs/code-of-conduct.html">Code of conduct</a>
    <a href="/docs/libs.html">Dependencies</a>
    <a href="/donation.html">Donate</a>
    <a href="/docs/faq.html">FAQ</a>
    <a href="/docs/features.html">Features</a>
    <a href="/docs/governance.html">Governance</a>
    <a href="/docs/history.html">History</a>
    <a href="/docs/install.html">Install</a>
    <a href="/docs/knownbugs.html">Known Bugs</a>
    <a href="/docs/knownrisks.html">Known Risks</a>
    <a href="/logo/">Logo</a>
    <a href="/docs/todo.html">TODO</a>
    <a href="/about.html">website Info</a>
  </div>
</div>
<div class="dropdown">
  <a class="dropbtn" href="/docs/protdocs.html">Protocols</a>
  <div class="dropdown-content">
    <a href="/docs/caextract.html">CA Extract</a>
    <a href="/docs/http-cookies.html">HTTP cookies</a>
    <a href="/docs/http3.html">HTTP/3</a>
    <a href="/docs/mqtt.html">MQTT</a>
    <a href="/docs/sslcerts.html">SSL certs</a>
    <a href="/docs/ssl-compared.html">SSL libs compared</a>
    <a href="/docs/url-syntax.html">URL syntax</a>
    <a href="/docs/websocket.html">WebSocket</a>
  </div>
</div>
<div class="dropdown">
  <a class="dropbtn" href="/docs/reldocs.html">Releases</a>
  <div class="dropdown-content">
    <a href="/ch/">Changelog</a>
    <a href="/docs/security.html">curl CVEs</a>
    <a href="/docs/releases.html">Release Table</a>
    <a href="/docs/versions.html">Version Numbering</a>
    <a href="/docs/vulnerabilities.html">Vulnerabilities</a>
  </div>
</div>
<div class="dropdown">
  <a class="dropbtn" href="/docs/tooldocs.html">Tool</a>
  <div class="dropdown-content">
    <a href="/docs/comparison-table.html">Comparison Table</a>
    <a href="/docs/manpage.html">curl man page</a>
    <a href="/docs/httpscripting.html">HTTP Scripting</a>
    <a href="/docs/mk-ca-bundle.html">mk-ca-bundle</a>
    <a href="/docs/tutorial.html">Tutorial</a>
    <a href="optionswhen.html">When options were added</a>
  </div>
</div>
<div class="dropdown">
  <a class="dropbtn" href="/docs/whodocs.html">Who and Why</a>
  <div class="dropdown-content">
    <a href="/docs/companies.html">Companies</a>
    <a href="/docs/copyright.html">Copyright</a>
    <a href="/sponsors.html">Sponsors</a>
    <a href="/docs/thanks.html">Thanks</a>
    <a href="/docs/thename.html">The name</a>
  </div>
</div>
</div>
<div class="contents">
<div class="where"><a href="/">curl</a> / <a href="/docs/">Docs</a> / <a href="/docs/projdocs.html">Project</a> / <b>Nice to have features</b></div>
<div class="relatedbox">
<b>Related:</b>
<br><a href="/dev/deprecate.html">Deprecate</a>
<br><a href="knownbugs.html">Known Bugs</a>
<br><a href="bugs.html">How To Report Bugs</a>
</div>
<!--
Copyright (C) Daniel Stenberg, <daniel@haxx.se>, et al.
SPDX-License-Identifier: curl
-->
<h1 id="curl-todo">curl TODO</h1>
<p>Things to do in project curl. Please tell us what you think,
contribute and send us patches that improve things.</p>
<p>Be aware that these are things that we could do, or have once been
considered things we could do. If you want to work on any of these
areas, please consider bringing it up for discussions first on the
mailing list so that we all agree it is still a good idea for the
project.</p>
<p>All bugs documented in the KNOWN_BUGS document are subject for
fixing.</p>
<h2 id="todo">Improvements</h2>
<p><strong><a href="#1-libcurl">1. libcurl</a></strong></p>
<ul class="task-list">
<li><label><input type="checkbox" /><a
href="#11-tfo-support-on-windows">1.1</a> TFO support on
Windows</label></li>
<li><label><input type="checkbox" /><a
href="#12-consult-appdata-also-for-netrc">1.2</a> Consult %APPDATA% also
for .netrc</label></li>
<li><label><input type="checkbox" /><a href="#13-struct-lifreq">1.3</a>
struct lifreq</label></li>
<li><label><input type="checkbox" /><a
href="#14-alt-svc-sharing">1.4</a> alt-svc sharing</label></li>
<li><label><input type="checkbox" /><a
href="#15-get-rid-of-path_max">1.5</a> get rid of PATH_MAX</label></li>
<li><label><input type="checkbox" /><a
href="#16-thread-safe-sharing">1.6</a> thread-safe sharing</label></li>
<li><label><input type="checkbox" /><a
href="#110-auto-detect-proxy">1.10</a> auto-detect proxy</label></li>
<li><label><input type="checkbox" /><a
href="#112-updated-dns-server-while-running">1.12</a> updated DNS server
while running</label></li>
<li><label><input type="checkbox" /><a
href="#113-c-ares-and-curlopt_opensocketfunction">1.13</a> c-ares and
CURLOPT_OPENSOCKETFUNCTION</label></li>
<li><label><input type="checkbox" /><a
href="#115-monitor-connections-in-the-connection-pool">1.15</a> Monitor
connections in the connection pool</label></li>
<li><label><input type="checkbox" /><a
href="#116-try-to-url-encode-given-url">1.16</a> Try to URL encode given
URL</label></li>
<li><label><input type="checkbox" /><a
href="#117-add-support-for-iris">1.17</a> Add support for
IRIs</label></li>
<li><label><input type="checkbox" /><a
href="#118-try-next-proxy-if-one-does-not-work">1.18</a> try next proxy
if one does not work</label></li>
<li><label><input type="checkbox" /><a
href="#119-provide-timing-info-for-each-redirect">1.19</a> provide
timing info for each redirect</label></li>
<li><label><input type="checkbox" /><a
href="#120-srv-and-uri-dns-records">1.20</a> SRV and URI DNS
records</label></li>
<li><label><input type="checkbox" /><a
href="#122-curlinfo_pause_state">1.22</a>
CURLINFO_PAUSE_STATE</label></li>
<li><label><input type="checkbox" /><a
href="#125-expose-tried-ip-addresses-that-failed">1.25</a> Expose tried
IP addresses that failed</label></li>
<li><label><input type="checkbox" /><a
href="#130-config-file-parsing">1.30</a> config file
parsing</label></li>
<li><label><input type="checkbox" /><a
href="#131-erase-secrets-from-heapstack-after-use">1.31</a> erase
secrets from heap/stack after use</label></li>
<li><label><input type="checkbox" /><a
href="#132-add-asynch-getaddrinfo-support">1.32</a> add asynch
getaddrinfo support</label></li>
<li><label><input type="checkbox" /><a
href="#133-make-doh-inherit-more-transfer-properties">1.33</a> make DoH
inherit more transfer properties</label></li>
</ul>
<p><strong><a href="#2-libcurl---multi-interface">2. libcurl - multi
interface</a></strong></p>
<ul class="task-list">
<li><label><input type="checkbox" /><a
href="#21-more-non-blocking">2.1</a> More non-blocking</label></li>
<li><label><input type="checkbox" /><a
href="#22-better-support-for-same-name-resolves">2.2</a> Better support
for same name resolves</label></li>
<li><label><input type="checkbox" /><a
href="#23-non-blocking-curl_multi_remove_handle">2.3</a> Non-blocking
curl_multi_remove_handle()</label></li>
<li><label><input type="checkbox" /><a
href="#24-split-connect-and-authentication-process">2.4</a> Split
connect and authentication process</label></li>
<li><label><input type="checkbox" /><a
href="#25-edge-triggered-sockets-should-work">2.5</a> Edge-triggered
sockets should work</label></li>
<li><label><input type="checkbox" /><a href="#26-multi-upkeep">2.6</a>
multi upkeep</label></li>
<li><label><input type="checkbox" /><a
href="#27-virtual-external-sockets">2.7</a> Virtual external
sockets</label></li>
<li><label><input type="checkbox" /><a
href="#28-dynamically-decide-to-use-socketpair">2.8</a> dynamically
decide to use socketpair</label></li>
</ul>
<p><strong><a href="#3-documentation">3. Documentation</a></strong></p>
<ul class="task-list">
<li><label><input type="checkbox" /><a
href="#31-improve-documentation-about-fork-safety">3.1</a> Improve
documentation about fork safety</label></li>
</ul>
<p><strong><a href="#4-ftp">4. FTP</a></strong></p>
<ul class="task-list">
<li><label><input type="checkbox" /><a href="#41-host">4.1</a>
HOST</label></li>
<li><label><input type="checkbox" /><a
href="#42-a-fixed-directory-listing-format">4.2</a> A fixed directory
listing format</label></li>
<li><label><input type="checkbox" /><a
href="#46-gssapi-via-windows-sspi">4.6</a> GSSAPI via Windows
SSPI</label></li>
<li><label><input type="checkbox" /><a
href="#47-stat-for-list-without-data-connection">4.7</a> STAT for LIST
without data connection</label></li>
<li><label><input type="checkbox" /><a
href="#48-passive-transfer-could-try-other-ip-addresses">4.8</a> Passive
transfer could try other IP addresses</label></li>
</ul>
<p><strong><a href="#5-http">5. HTTP</a></strong></p>
<ul class="task-list">
<li><label><input type="checkbox" /><a
href="#51-provide-the-error-body-from-a-connect-response">5.1</a>
Provide the error body from a CONNECT response</label></li>
<li><label><input type="checkbox" /><a
href="#52-obey-retry-after-in-redirects">5.2</a> Obey Retry-After in
redirects</label></li>
<li><label><input type="checkbox" /><a
href="#53-rearrange-request-header-order">5.3</a> Rearrange request
header order</label></li>
<li><label><input type="checkbox" /><a
href="#54-allow-san-names-in-http2-server-push">5.4</a> Allow SAN names
in HTTP/2 server push</label></li>
<li><label><input type="checkbox" /><a href="#55-auth-in-urls">5.5</a>
auth= in URLs</label></li>
<li><label><input type="checkbox" /><a
href="#56-alt-svc-should-fallback-if-alt-svc-does-not-work">5.6</a>
alt-svc should fallback if alt-svc does not work</label></li>
<li><label><input type="checkbox" /><a
href="#57-require-http-version-x-or-higher">5.7</a> Require HTTP version
X or higher</label></li>
</ul>
<p><strong><a href="#6-telnet">6. TELNET</a></strong></p>
<ul class="task-list">
<li><label><input type="checkbox" /><a href="#61-ditch-stdin">6.1</a>
ditch stdin</label></li>
<li><label><input type="checkbox" /><a
href="#62-ditch-telnet-specific-select">6.2</a> ditch telnet-specific
select</label></li>
<li><label><input type="checkbox" /><a
href="#63-feature-negotiation-debug-data">6.3</a> feature negotiation
debug data</label></li>
<li><label><input type="checkbox" /><a
href="#64-exit-immediately-upon-connection-if-stdin-is-devnull">6.4</a>
exit immediately upon connection if stdin is /dev/null</label></li>
</ul>
<p><strong><a href="#7-smtp">7. SMTP</a></strong></p>
<ul class="task-list">
<li><label><input type="checkbox" /><a
href="#71-passing-notify-option-to-curlopt_mail_rcpt">7.1</a> Passing
NOTIFY option to CURLOPT_MAIL_RCPT</label></li>
<li><label><input type="checkbox" /><a
href="#72-enhanced-capability-support">7.2</a> Enhanced capability
support</label></li>
<li><label><input type="checkbox" /><a
href="#73-add-curlopt_mail_client-option">7.3</a> Add
CURLOPT_MAIL_CLIENT option</label></li>
</ul>
<p><strong><a href="#8-pop3">8. POP3</a></strong></p>
<ul class="task-list">
<li><label><input type="checkbox" /><a
href="#82-enhanced-capability-support">8.2</a> Enhanced capability
support</label></li>
</ul>
<p><strong><a href="#9-imap">9. IMAP</a></strong></p>
<ul class="task-list">
<li><label><input type="checkbox" /><a
href="#91-enhanced-capability-support">9.1</a> Enhanced capability
support</label></li>
</ul>
<p><strong><a href="#10-ldap">10. LDAP</a></strong></p>
<ul class="task-list">
<li><label><input type="checkbox" /><a
href="#101-sasl-based-authentication-mechanisms">10.1</a> SASL based
authentication mechanisms</label></li>
<li><label><input type="checkbox" /><a
href="#102-curlopt_ssl_ctx_function-for-ldaps">10.2</a>
CURLOPT_SSL_CTX_FUNCTION for LDAPS</label></li>
<li><label><input type="checkbox" /><a
href="#103-paged-searches-on-ldap-server">10.3</a> Paged searches on
LDAP server</label></li>
<li><label><input type="checkbox" /><a
href="#104-certificate-based-authentication">10.4</a> Certificate-Based
Authentication</label></li>
</ul>
<p><strong><a href="#11-smb">11. SMB</a></strong></p>
<ul class="task-list">
<li><label><input type="checkbox" /><a
href="#111-file-listing-support">11.1</a> File listing
support</label></li>
<li><label><input type="checkbox" /><a
href="#112-honor-file-timestamps">11.2</a> Honor file
timestamps</label></li>
<li><label><input type="checkbox" /><a href="#113-use-ntlmv2">11.3</a>
Use NTLMv2</label></li>
<li><label><input type="checkbox" /><a
href="#114-create-remote-directories">11.4</a> Create remote
directories</label></li>
</ul>
<p><strong><a href="#12-file">12. FILE</a></strong></p>
<ul class="task-list">
<li><label><input type="checkbox" /><a
href="#121-directory-listing-on-non-posix">12.1</a> Directory listing on
non-POSIX</label></li>
</ul>
<p><strong><a href="#13-tls">13. TLS</a></strong></p>
<ul class="task-list">
<li><label><input type="checkbox" /><a
href="#131-tls-psk-with-openssl">13.1</a> TLS-PSK with
OpenSSL</label></li>
<li><label><input type="checkbox" /><a
href="#132-tls-channel-binding">13.2</a> TLS channel
binding</label></li>
<li><label><input type="checkbox" /><a
href="#133-defeat-tls-fingerprinting">13.3</a> Defeat TLS
fingerprinting</label></li>
<li><label><input type="checkbox" /><a
href="#134-consider-ocsp-stapling-by-default">13.4</a> Consider OCSP
stapling by default</label></li>
<li><label><input type="checkbox" /><a
href="#136-provide-callback-for-cert-verification">13.6</a> Provide
callback for cert verification</label></li>
<li><label><input type="checkbox" /><a
href="#137-less-memory-massaging-with-schannel">13.7</a> Less memory
massaging with Schannel</label></li>
<li><label><input type="checkbox" /><a href="#138-support-dane">13.8</a>
Support DANE</label></li>
<li><label><input type="checkbox" /><a
href="#139-tls-record-padding">13.9</a> TLS record padding</label></li>
<li><label><input type="checkbox" /><a
href="#1310-support-authority-information-access-certificate-extension-aia">13.10</a>
Support Authority Information Access certificate extension
(AIA)</label></li>
<li><label><input type="checkbox" /><a
href="#1311-some-tls-options-are-not-offered-for-https-proxies">13.11</a>
Some TLS options are not offered for HTTPS proxies</label></li>
<li><label><input type="checkbox" /><a
href="#1313-make-sure-we-forbid-tls-13-post-handshake-authentication">13.13</a>
Make sure we forbid TLS 1.3 post-handshake authentication</label></li>
<li><label><input type="checkbox" /><a
href="#1314-support-the-clienthello-extension">13.14</a> Support the
clienthello extension</label></li>
<li><label><input type="checkbox" /><a
href="#1316-share-the-ca-cache">13.16</a> Share the CA
cache</label></li>
<li><label><input type="checkbox" /><a
href="#1317-add-missing-features-to-tls-backends">13.17</a> Add missing
features to TLS backends</label></li>
</ul>
<p><strong><a href="#14-proxy">14. Proxy</a></strong></p>
<ul class="task-list">
<li><label><input type="checkbox" /><a
href="#141-retry-socks-handshake-on-address-type-not-supported">14.1</a>
Retry SOCKS handshake on address type not supported</label></li>
</ul>
<p><strong><a href="#15-schannel">15. Schannel</a></strong></p>
<ul class="task-list">
<li><label><input type="checkbox" /><a
href="#151-extend-support-for-client-certificate-authentication">15.1</a>
Extend support for client certificate authentication</label></li>
<li><label><input type="checkbox" /><a
href="#152-extend-support-for-the---ciphers-option">15.2</a> Extend
support for the --ciphers option</label></li>
<li><label><input type="checkbox" /><a
href="#154-add-option-to-allow-abrupt-server-closure">15.4</a> Add
option to allow abrupt server closure</label></li>
</ul>
<p><strong><a href="#16-sasl">16. SASL</a></strong></p>
<ul class="task-list">
<li><label><input type="checkbox" /><a
href="#161-other-authentication-mechanisms">16.1</a> Other
authentication mechanisms</label></li>
<li><label><input type="checkbox" /><a
href="#162-add-qop-support-to-gssapi-authentication">16.2</a> Add QOP
support to GSSAPI authentication</label></li>
</ul>
<p><strong><a href="#17-ssh-protocols">17. SSH
protocols</a></strong></p>
<ul class="task-list">
<li><label><input type="checkbox" /><a href="#171-multiplexing">17.1</a>
Multiplexing</label></li>
<li><label><input type="checkbox" /><a
href="#172-handle-growing-sftp-files">17.2</a> Handle growing SFTP
files</label></li>
<li><label><input type="checkbox" /><a
href="#173-read-keys-from-sshid_ecdsa-id_ed25519">17.3</a> Read keys
from ~/.ssh/id_ecdsa, id_ed25519</label></li>
<li><label><input type="checkbox" /><a
href="#174-support-curlopt_prequote">17.4</a> Support
CURLOPT_PREQUOTE</label></li>
<li><label><input type="checkbox" /><a
href="#175-ssh-over-https-proxy-with-more-backends">17.5</a> SSH over
HTTPS proxy with more backends</label></li>
<li><label><input type="checkbox" /><a
href="#176-sftp-with-scp">17.6</a> SFTP with SCP://</label></li>
</ul>
<p><strong><a href="#18-command-line-tool">18. Command line
tool</a></strong></p>
<ul class="task-list">
<li><label><input type="checkbox" /><a href="#181-sync">18.1</a>
sync</label></li>
<li><label><input type="checkbox" /><a href="#182-glob-posts">18.2</a>
glob posts</label></li>
<li><label><input type="checkbox" /><a
href="#184---proxycommand">18.4</a> --proxycommand</label></li>
<li><label><input type="checkbox" /><a
href="#185-utf-8-filenames-in-content-disposition">18.5</a> UTF-8
filenames in Content-Disposition</label></li>
<li><label><input type="checkbox" /><a
href="#186-option-to-make--z-merge-lined-based-outputs-on-stdout">18.6</a>
Option to make -Z merge lined based outputs on stdout</label></li>
<li><label><input type="checkbox" /><a
href="#187-specify-which-response-codes-that-make--f--fail-return-error">18.7</a>
specify which response codes that make -f/--fail return
error</label></li>
<li><label><input type="checkbox" /><a
href="#189-choose-the-name-of-file-in-braces-for-complex-urls">18.9</a>
Choose the name of file in braces for complex URLs</label></li>
<li><label><input type="checkbox" /><a
href="#1810-improve-how-curl-works-in-a-windows-console-window">18.10</a>
improve how curl works in a Windows console window</label></li>
<li><label><input type="checkbox" /><a
href="#1811-windows-set-attribute-archive-for-completed-downloads">18.11</a>
Windows: set attribute 'archive' for completed downloads</label></li>
<li><label><input type="checkbox" /><a
href="#1812-keep-running-read-instructions-from-pipesocket">18.12</a>
keep running, read instructions from pipe/socket</label></li>
<li><label><input type="checkbox" /><a
href="#1813-acknowledge-ratelimit-headers">18.13</a> Acknowledge
Ratelimit headers</label></li>
<li><label><input type="checkbox" /><a href="#1814---dry-run">18.14</a>
--dry-run</label></li>
<li><label><input type="checkbox" /><a
href="#1815---retry-should-resume">18.15</a> --retry should
resume</label></li>
<li><label><input type="checkbox" /><a
href="#1817-consider-filename-from-the-redirected-url-with--o-">18.17</a>
consider filename from the redirected URL with -O ?</label></li>
<li><label><input type="checkbox" /><a
href="#1818-retry-on-network-is-unreachable">18.18</a> retry on network
is unreachable</label></li>
<li><label><input type="checkbox" /><a
href="#1820-hostname-sections-in-config-files">18.20</a> hostname
sections in config files</label></li>
<li><label><input type="checkbox" /><a
href="#1821-retry-on-the-redirected-to-url">18.21</a> retry on the
redirected-to URL</label></li>
<li><label><input type="checkbox" /><a
href="#1823-set-the-modification-date-on-an-uploaded-file">18.23</a> Set
the modification date on an uploaded file</label></li>
<li><label><input type="checkbox" /><a
href="#1824-use-multiple-parallel-transfers-for-a-single-download">18.24</a>
Use multiple parallel transfers for a single download</label></li>
<li><label><input type="checkbox" /><a
href="#1825-prevent-terminal-injection-when-writing-to-terminal">18.25</a>
Prevent terminal injection when writing to terminal</label></li>
<li><label><input type="checkbox" /><a
href="#1826-custom-progress-meter-update-interval">18.26</a> Custom
progress meter update interval</label></li>
<li><label><input type="checkbox" /><a
href="#1827--j-and--o-with--encoded-filenames">18.27</a> -J and -O with
%-encoded filenames</label></li>
<li><label><input type="checkbox" /><a
href="#1828--j-with--c--">18.28</a> -J with -C -</label></li>
<li><label><input type="checkbox" /><a
href="#1829---retry-and-transfer-timeouts">18.29</a> --retry and
transfer timeouts</label></li>
</ul>
<p><strong><a href="#19-build">19. Build</a></strong></p>
<ul class="task-list">
<li><label><input type="checkbox" /><a
href="#192-enable-pie-and-relro-by-default">19.2</a> Enable PIE and
RELRO by default</label></li>
<li><label><input type="checkbox" /><a
href="#193-do-not-use-gnu-libtool-on-openbsd">19.3</a> Do not use GNU
libtool on OpenBSD</label></li>
<li><label><input type="checkbox" /><a
href="#194-package-curl-for-windows-in-a-signed-installer">19.4</a>
Package curl for Windows in a signed installer</label></li>
<li><label><input type="checkbox" /><a
href="#195-make-configure-use---cache-file-more-and-better">19.5</a>
make configure use --cache-file more and better</label></li>
</ul>
<p><strong><a href="#20-test-suite">20. Test suite</a></strong></p>
<ul class="task-list">
<li><label><input type="checkbox" /><a href="#201-ssl-tunnel">20.1</a>
SSL tunnel</label></li>
<li><label><input type="checkbox" /><a
href="#202-more-protocols-supported">20.2</a> more protocols
supported</label></li>
<li><label><input type="checkbox" /><a
href="#203-more-platforms-supported">20.3</a> more platforms
supported</label></li>
<li><label><input type="checkbox" /><a
href="#204-write-an-smb-test-server-to-replace-impacket">20.4</a> write
an SMB test server to replace impacket</label></li>
<li><label><input type="checkbox" /><a
href="#205-use-the-rfc-6265-test-suite">20.5</a> Use the RFC 6265 test
suite</label></li>
<li><label><input type="checkbox" /><a
href="#206-run-web-platform-tests-url-tests">20.6</a> Run
web-platform-tests URL tests</label></li>
</ul>
<p><strong><a href="#21-mqtt">21. MQTT</a></strong></p>
<ul class="task-list">
<li><label><input type="checkbox" /><a
href="#211-support-rate-limiting">21.1</a> Support
rate-limiting</label></li>
<li><label><input type="checkbox" /><a
href="#212-support-mqtts">21.2</a> Support MQTTS</label></li>
<li><label><input type="checkbox" /><a
href="#213-handle-network-blocks">21.3</a> Handle network
blocks</label></li>
<li><label><input type="checkbox" /><a
href="#214-large-payloads">21.4</a> large payloads</label></li>
</ul>
<p><strong><a href="#22-tftp">22. TFTP</a></strong></p>
<ul class="task-list">
<li><label><input type="checkbox" /><a
href="#221-tftp-does-not-convert-lf-to-crlf-for-modenetascii">22.1</a>
TFTP does not convert LF to CRLF for mode=netascii</label></li>
</ul>
<p><strong><a href="#23-gopher">23. Gopher</a></strong></p>
<ul class="task-list">
<li><label><input type="checkbox" /><a
href="#231-handle-network-blocks">23.1</a> Handle network
blocks</label></li>
</ul>
<hr />
<h3 id="1-libcurl">1. libcurl</h3>
<h4 id="11-tfo-support-on-windows">1.1 TFO support on Windows</h4>
<p>libcurl supports the CURLOPT_TCP_FASTOPEN option since 7.49.0 for
Linux and macOS. Windows supports TCP Fast Open starting with Windows
10, version 1607 and we should add support for it.</p>
<p>TCP Fast Open is supported on several platforms but not on Windows.
Work on this was once started but never finished.</p>
<p>See <a
href="https://github.com/curl/curl/pull/3378">https://github.com/curl/curl/pull/3378</a></p>
<h4 id="12-consult-appdata-also-for-netrc">1.2 Consult %APPDATA% also
for .netrc</h4>
<p>%APPDATA%.netrc is not considered when running on Windows. should not
it?</p>
<p>See <a
href="https://github.com/curl/curl/issues/4016">https://github.com/curl/curl/issues/4016</a></p>
<h4 id="13-struct-lifreq">1.3 struct lifreq</h4>
<p>Use 'struct lifreq' and SIOCGLIFADDR instead of 'struct ifreq' and
SIOCGIFADDR on newer Solaris versions as they claim the latter is
obsolete. To support IPv6 interface addresses for network interfaces
properly.</p>
<h4 id="14-alt-svc-sharing">1.4 alt-svc sharing</h4>
<p>The share interface could benefit from allowing the alt-svc cache to
be possible to share between easy handles.</p>
<p>See <a
href="https://github.com/curl/curl/issues/4476">https://github.com/curl/curl/issues/4476</a></p>
<p>The share interface offers CURL_LOCK_DATA_CONNECT to have multiple
easy handle share a connection cache, but due to how connections are
used they are still not thread-safe when used shared.</p>
<p>See <a
href="https://github.com/curl/curl/issues/4915">https://github.com/curl/curl/issues/4915</a>
and lib1541.c</p>
<p>The share interface offers CURL_LOCK_DATA_HSTS to have multiple easy
handle share an HSTS cache, but this is not thread-safe.</p>
<h4 id="15-get-rid-of-path_max">1.5 get rid of PATH_MAX</h4>
<p>Having code use and rely on PATH_MAX is not nice: <a
href="https://insanecoding.blogspot.com/2007/11/pathmax-simply-isnt.html">https://insanecoding.blogspot.com/2007/11/pathmax-simply-isnt.html</a></p>
<p>Currently the libssh2 SSH based code uses it, but to remove PATH_MAX
from there we need libssh2 to properly tell us when we pass in a too
small buffer and its current API (as of libssh2 1.2.7) does not.</p>
<h4 id="16-thread-safe-sharing">1.6 thread-safe sharing</h4>
<p>Using the share interface users can share some data between easy
handles but several of the sharing options are documented as not safe
and supported to share between multiple concurrent threads. Fixing this
would enable more users to share data in more powerful ways.</p>
<h4 id="110-auto-detect-proxy">1.10 auto-detect proxy</h4>
<p>libcurl could be made to detect the system proxy setup automatically
and use that. On Windows, macOS and Linux desktops for example.</p>
<p>The pull-request to use libproxy for this was deferred due to doubts
on the reliability of the dependency and how to use it: <a
href="https://github.com/curl/curl/pull/977">https://github.com/curl/curl/pull/977</a></p>
<p>libdetectproxy is a (C++) library for detecting the proxy on Windows
<a
href="https://github.com/paulharris/libdetectproxy">https://github.com/paulharris/libdetectproxy</a></p>
<h4 id="112-updated-dns-server-while-running">1.12 updated DNS server
while running</h4>
<p>If /etc/resolv.conf gets updated while a program using libcurl is
running, it is may cause name resolves to fail unless res_init() is
called. We should consider calling res_init() + retry once
unconditionally on all name resolve failures to mitigate against this.
Firefox works like that. Note that Windows does not have res_init() or
an alternative.</p>
<p><a
href="https://github.com/curl/curl/issues/2251">https://github.com/curl/curl/issues/2251</a></p>
<h4 id="113-c-ares-and-curlopt_opensocketfunction">1.13 c-ares and
CURLOPT_OPENSOCKETFUNCTION</h4>
<p>curl creates most sockets via the CURLOPT_OPENSOCKETFUNCTION callback
and close them with the CURLOPT_CLOSESOCKETFUNCTION callback. However,
c-ares does not use those functions and instead opens and closes the
sockets itself. This means that when curl passes the c-ares socket to
the CURLMOPT_SOCKETFUNCTION it is not owned by the application like
other sockets.</p>
<p>See <a
href="https://github.com/curl/curl/issues/2734">https://github.com/curl/curl/issues/2734</a></p>
<h4 id="115-monitor-connections-in-the-connection-pool">1.15 Monitor
connections in the connection pool</h4>
<p>libcurl's connection cache or pool holds a number of open connections
for the purpose of possible subsequent connection reuse. It may contain
a few up to a significant amount of connections. Currently, libcurl
leaves all connections as they are and first when a connection is
iterated over for matching or reuse purpose it is verified that it is
still alive.</p>
<p>Those connections may get closed by the server side for idleness or
they may get an HTTP/2 ping from the peer to verify that they are still
alive. By adding monitoring of the connections while in the pool,
libcurl can detect dead connections (and close them) better and earlier,
and it can handle HTTP/2 pings to keep such ones alive even when not
actively doing transfers on them.</p>
<h4 id="116-try-to-url-encode-given-url">1.16 Try to URL encode given
URL</h4>
<p>Given a URL that for example contains spaces, libcurl could have an
option that would try somewhat harder than it does now and convert
spaces to %20 and perhaps URL encoded byte values over 128 etc
(basically do what the redirect following code already does).</p>
<p><a
href="https://github.com/curl/curl/issues/514">https://github.com/curl/curl/issues/514</a></p>
<h4 id="117-add-support-for-iris">1.17 Add support for IRIs</h4>
<p>IRIs (RFC 3987) allow localized, non-ASCII, names in the URL. To
properly support this, curl/libcurl would need to translate/encode the
given input from the input string encoding into percent encoded output
"over the wire".</p>
<p>To make that work smoothly for curl users even on Windows, curl would
probably need to be able to convert from several input encodings.</p>
<h4 id="118-try-next-proxy-if-one-does-not-work">1.18 try next proxy if
one does not work</h4>
<p>Allow an application to specify a list of proxies to try, and failing
to connect to the first go on and try the next instead until the list is
exhausted. Browsers support this feature at least when they specify
proxies using PACs.</p>
<p><a
href="https://github.com/curl/curl/issues/896">https://github.com/curl/curl/issues/896</a></p>
<h4 id="119-provide-timing-info-for-each-redirect">1.19 provide timing
info for each redirect</h4>
<p>curl and libcurl provide timing information via a set of different
time-stamps (CURLINFO_*_TIME). When curl is following redirects, those
returned time value are the accumulated sums. An improvement could be to
offer separate timings for each redirect.</p>
<p><a
href="https://github.com/curl/curl/issues/6743">https://github.com/curl/curl/issues/6743</a></p>
<h4 id="120-srv-and-uri-dns-records">1.20 SRV and URI DNS records</h4>
<p>Offer support for resolving SRV and URI DNS records for libcurl to
know which server to connect to for various protocols (including
HTTP).</p>
<h4 id="122-curlinfo_pause_state">1.22 CURLINFO_PAUSE_STATE</h4>
<p>Return information about the transfer's current pause state, in both
directions. <a
href="https://github.com/curl/curl/issues/2588">https://github.com/curl/curl/issues/2588</a></p>
<h4 id="125-expose-tried-ip-addresses-that-failed">1.25 Expose tried IP
addresses that failed</h4>
<p>When libcurl fails to connect to a host, it could offer the
application the addresses that were used in the attempt. Source + dest
IP, source + dest port and protocol (UDP or TCP) for each failure.
Possibly as a callback. Perhaps also provide "reason".</p>
<p><a
href="https://github.com/curl/curl/issues/2126">https://github.com/curl/curl/issues/2126</a></p>
<h4 id="130-config-file-parsing">1.30 config file parsing</h4>
<p>Consider providing an API, possibly in a separate companion library,
for parsing a config file like curl's -K/--config option to allow
applications to get the same ability to read curl options from
files.</p>
<p>See <a
href="https://github.com/curl/curl/issues/3698">https://github.com/curl/curl/issues/3698</a></p>
<h4 id="131-erase-secrets-from-heapstack-after-use">1.31 erase secrets
from heap/stack after use</h4>
<p>Introducing a concept and system to erase secrets from memory after
use, it could help mitigate and lessen the impact of (future) security
problems etc. However: most secrets are passed to libcurl as clear text
from the application and then clearing them within the library adds
nothing...</p>
<p><a
href="https://github.com/curl/curl/issues/7268">https://github.com/curl/curl/issues/7268</a></p>
<h4 id="132-add-asynch-getaddrinfo-support">1.32 add asynch getaddrinfo
support</h4>
<p>Use getaddrinfo_a() to provide an asynch name resolver backend to
libcurl that does not use threads and does not depend on c-ares. The
getaddrinfo_a function is (probably?) glibc specific but that is a
widely used libc among our users.</p>
<p><a
href="https://github.com/curl/curl/pull/6746">https://github.com/curl/curl/pull/6746</a></p>
<h4 id="133-make-doh-inherit-more-transfer-properties">1.33 make DoH
inherit more transfer properties</h4>
<p>Some options are not inherited because they are not relevant for the
DoH SSL connections, or inheriting the option may result in unexpected
behavior. For example the user's debug function callback is not
inherited because it would be unexpected for internal handles (ie DoH
handles) to be passed to that callback.</p>
<p>If an option is not inherited then it is not possible to set it
separately for DoH without a DoH-specific option. For example:
CURLOPT_DOH_SSL_VERIFYHOST, CURLOPT_DOH_SSL_VERIFYPEER and
CURLOPT_DOH_SSL_VERIFYSTATUS.</p>
<p>See <a
href="https://github.com/curl/curl/issues/6605">https://github.com/curl/curl/issues/6605</a></p>
<h3 id="2-libcurl---multi-interface">2. libcurl - multi interface</h3>
<h4 id="21-more-non-blocking">2.1 More non-blocking</h4>
<p>Make sure we do not ever loop because of non-blocking sockets
returning EWOULDBLOCK or similar. Blocking cases include:</p>
<ul>
<li><p>Name resolves on non-Windows unless c-ares or the threaded
resolver is used.</p></li>
<li><p>The threaded resolver may block on cleanup: <a
href="https://github.com/curl/curl/issues/4852">https://github.com/curl/curl/issues/4852</a></p></li>
<li><p>file:// transfers</p></li>
<li><p>TELNET transfers</p></li>
<li><p>GSSAPI authentication for FTP transfers</p></li>
<li><p>The "DONE" operation (post transfer protocol-specific actions)
for the protocols SFTP, SMTP, FTP. Fixing multi_done() for this is a
worthy task.</p></li>
<li><p>curl_multi_remove_handle for any of the above. See section
2.3.</p></li>
<li><p>Calling curl_ws_send() from a callback</p></li>
</ul>
<h4 id="22-better-support-for-same-name-resolves">2.2 Better support for
same name resolves</h4>
<p>If a name resolve has been initiated for name NN and a second easy
handle wants to resolve that name as well, make it wait for the first
resolve to end up in the cache instead of doing a second separate
resolve. This is especially needed when adding many simultaneous handles
using the same host name when the DNS resolver can get flooded.</p>
<h4 id="23-non-blocking-curl_multi_remove_handle">2.3 Non-blocking
curl_multi_remove_handle()</h4>
<p>The multi interface has a few API calls that assume a blocking
behavior, like add_handle() and remove_handle() which limits what we can
do internally. The multi API need to be moved even more into a single
function that "drives" everything in a non-blocking manner and signals
when something is done. A remove or add would then only ask for the
action to get started and then multi_perform() etc still be called until
the add/remove is completed.</p>
<h4 id="24-split-connect-and-authentication-process">2.4 Split connect
and authentication process</h4>
<p>The multi interface treats the authentication process as part of the
connect phase. As such any failures during authentication does not
trigger the relevant QUIT or LOGOFF for protocols such as IMAP, POP3 and
SMTP.</p>
<h4 id="25-edge-triggered-sockets-should-work">2.5 Edge-triggered
sockets should work</h4>
<p>The multi_socket API should work with edge-triggered socket events.
One of the internal actions that need to be improved for this to work
perfectly is the 'maxloops' handling in transfer.c:readwrite_data().</p>
<h4 id="26-multi-upkeep">2.6 multi upkeep</h4>
<p>In libcurl 7.62.0 we introduced curl_easy_upkeep. It unfortunately
only works on easy handles. We should introduces a version of that for
the multi handle, and also consider doing "upkeep" automatically on
connections in the connection pool when the multi handle is in used.</p>
<p>See <a
href="https://github.com/curl/curl/issues/3199">https://github.com/curl/curl/issues/3199</a></p>
<h4 id="27-virtual-external-sockets">2.7 Virtual external sockets</h4>
<p>libcurl performs operations on the given file descriptor that
presumes it is a socket and an application cannot replace them at the
moment. Allowing an application to fully replace those would allow a
larger degree of freedom and flexibility.</p>
<p>See <a
href="https://github.com/curl/curl/issues/5835">https://github.com/curl/curl/issues/5835</a></p>
<h4 id="28-dynamically-decide-to-use-socketpair">2.8 dynamically decide
to use socketpair</h4>
<p>For users who do not use curl_multi_wait() or do not care for
curl_multi_wakeup(), we could introduce a way to make libcurl NOT create
a socketpair in the multi handle.</p>
<p>See <a
href="https://github.com/curl/curl/issues/4829">https://github.com/curl/curl/issues/4829</a></p>
<h3 id="3-documentation">3. Documentation</h3>
<h4 id="31-improve-documentation-about-fork-safety">3.1 Improve
documentation about fork safety</h4>
<p>See <a
href="https://github.com/curl/curl/issues/6968">https://github.com/curl/curl/issues/6968</a></p>
<h3 id="4-ftp">4. FTP</h3>
<h4 id="41-host">4.1 HOST</h4>
<p>HOST is a command for a client to tell which hostname to use, to
offer FTP servers named-based virtual hosting:</p>
<p><a
href="https://datatracker.ietf.org/doc/html/rfc7151">https://datatracker.ietf.org/doc/html/rfc7151</a></p>
<h4 id="42-a-fixed-directory-listing-format">4.2 A fixed directory
listing format</h4>
<p>Since listing the contents of a remove directory with FTP is
returning the list in a format and style the server likes without any
estblished or even defactor standard existing, it would be a feature to
users if curl could parse the directory listing and output a general
curl format that is fixed and the same, independent of the server's
choice. This would allow users to better and more reliably extract
information about remote content via FTP directory listings.</p>
<h4 id="46-gssapi-via-windows-sspi">4.6 GSSAPI via Windows SSPI</h4>
<p>In addition to currently supporting the SASL GSSAPI mechanism
(Kerberos V5) via third-party GSS-API libraries, such as MIT Kerberos,
also add support for GSSAPI authentication via Windows SSPI.</p>
<h4 id="47-stat-for-list-without-data-connection">4.7 STAT for LIST
without data connection</h4>
<p>Some FTP servers allow STAT for listing directories instead of using
LIST, and the response is then sent over the control connection instead
of as the otherwise usedw data connection: <a
href="https://www.nsftools.com/tips/RawFTP.htm#STAT">https://www.nsftools.com/tips/RawFTP.htm#STAT</a></p>
<p>This is not detailed in any FTP specification.</p>
<h4 id="48-passive-transfer-could-try-other-ip-addresses">4.8 Passive
transfer could try other IP addresses</h4>
<p>When doing FTP operations through a proxy at localhost, the reported
spotted that curl only tried to connect once to the proxy, while it had
multiple addresses and a failed connect on one address should make it
try the next.</p>
<p>After switching to passive mode (EPSV), curl could try all IP
addresses for "localhost". Currently it tries ::1, but it should also
try 127.0.0.1.</p>
<p>See <a
href="https://github.com/curl/curl/issues/1508">https://github.com/curl/curl/issues/1508</a></p>
<h3 id="5-http">5. HTTP</h3>
<h4 id="51-provide-the-error-body-from-a-connect-response">5.1 Provide
the error body from a CONNECT response</h4>
<p>When curl receives a body response from a CONNECT request to a proxy,
it always just reads and ignores it. It would make some users happy if
curl instead optionally would be able to make that responsible
available. Via a new callback? Through some other means?</p>
<p>See <a
href="https://github.com/curl/curl/issues/9513">https://github.com/curl/curl/issues/9513</a></p>
<h4 id="52-obey-retry-after-in-redirects">5.2 Obey Retry-After in
redirects</h4>
<p>The Retry-After is said to dictate "the minimum time that the user
agent is asked to wait before issuing the redirected request" and
libcurl does not obey this.</p>
<p>See <a
href="https://github.com/curl/curl/issues/11447">https://github.com/curl/curl/issues/11447</a></p>
<h4 id="53-rearrange-request-header-order">5.3 Rearrange request header
order</h4>
<p>Server implementers often make an effort to detect browser and to
reject clients it can detect to not match. One of the last details we
cannot yet control in libcurl's HTTP requests, which also can be
exploited to detect that libcurl is in fact used even when it tries to
impersonate a browser, is the order of the request headers. I propose
that we introduce a new option in which you give headers a value, and
then when the HTTP request is built it sorts the headers based on that
number. We could then have internally created headers use a default
value so only headers that need to be moved have to be specified.</p>
<h4 id="54-allow-san-names-in-http2-server-push">5.4 Allow SAN names in
HTTP/2 server push</h4>
<p>curl only allows HTTP/2 push promise if the provided :authority
header value exactly matches the hostname given in the URL. It could be
extended to allow any name that would match the Subject Alternative
Names in the server's TLS certificate.</p>
<p>See <a
href="https://github.com/curl/curl/pull/3581">https://github.com/curl/curl/pull/3581</a></p>
<h4 id="55-auth-in-urls">5.5 auth= in URLs</h4>
<p>Add the ability to specify the preferred authentication mechanism to
use by using ;auth=&lt;mech&gt; in the login part of the URL.</p>
<p>For example:</p>
<p>http://test:pass;auth=<a
href="mailto:NTLM@example.com">NTLM@example.com</a> would be equivalent
to specifying --user test:pass;auth=NTLM or --user test:pass --ntlm from
the command line.</p>
<p>Additionally this should be implemented for proxy base URLs as
well.</p>
<h4 id="56-alt-svc-should-fallback-if-alt-svc-does-not-work">5.6 alt-svc
should fallback if alt-svc does not work</h4>
<p>The alt-svc: header provides a set of alternative services for curl
to use instead of the original. If the first attempted one fails, it
should try the next etc and if all alternatives fail go back to the
original.</p>
<p>See <a
href="https://github.com/curl/curl/issues/4908">https://github.com/curl/curl/issues/4908</a></p>
<h4 id="57-require-http-version-x-or-higher">5.7 Require HTTP version X
or higher</h4>
<p>curl and libcurl provide options for trying higher HTTP versions (for
example HTTP/2) but then still allows the server to pick version 1.1. We
could consider adding a way to require a minimum version.</p>
<p>See <a
href="https://github.com/curl/curl/issues/7980">https://github.com/curl/curl/issues/7980</a></p>
<h3 id="6-telnet">6. TELNET</h3>
<h4 id="61-ditch-stdin">6.1 ditch stdin</h4>
<p>Reading input (to send to the remote server) on stdin is a crappy
solution for library purposes. We need to invent a good way for the
application to be able to provide the data to send.</p>
<h4 id="62-ditch-telnet-specific-select">6.2 ditch telnet-specific
select</h4>
<p>Move the telnet support's network select() loop go away and merge the
code into the main transfer loop. Until this is done, the multi
interface does not work for telnet.</p>
<h4 id="63-feature-negotiation-debug-data">6.3 feature negotiation debug
data</h4>
<p>Add telnet feature negotiation data to the debug callback as header
data.</p>
<h4 id="64-exit-immediately-upon-connection-if-stdin-is-devnull">6.4
exit immediately upon connection if stdin is /dev/null</h4>
<p>If it did, curl could be used to probe if there is an server there
listening on a specific port. That is, the following command would exit
immediately after the connection is established with exit code 0:</p>
<p>curl -s --connect-timeout 2 telnet://example.com:80 &lt;/dev/null</p>
<h3 id="7-smtp">7. SMTP</h3>
<h4 id="71-passing-notify-option-to-curlopt_mail_rcpt">7.1 Passing
NOTIFY option to CURLOPT_MAIL_RCPT</h4>
<p>Is there a way to pass the NOTIFY option to the CURLOPT_MAIL_RCPT
option ? I set a string that already contains a bracket. For instance
something like that: curl_slist_append( recipients, "&lt;foo@bar&gt;
NOTIFY=SUCCESS,FAILURE" );</p>
<p><a
href="https://github.com/curl/curl/issues/8232">https://github.com/curl/curl/issues/8232</a></p>
<h4 id="72-enhanced-capability-support">7.2 Enhanced capability
support</h4>
<p>Add the ability, for an application that uses libcurl, to obtain the
list of capabilities returned from the EHLO command.</p>
<h4 id="73-add-curlopt_mail_client-option">7.3 Add CURLOPT_MAIL_CLIENT
option</h4>
<p>Rather than use the URL to specify the mail client string to present
in the HELO and EHLO commands, libcurl should support a new CURLOPT
specifically for specifying this data as the URL is non-standard and to
be honest a bit of a hack ;-)</p>
<p>Please see the following thread for more information: <a
href="https://curl.se/mail/lib-2012-05/0178.html">https://curl.se/mail/lib-2012-05/0178.html</a></p>
<h3 id="8-pop3">8. POP3</h3>
<h4 id="82-enhanced-capability-support">8.2 Enhanced capability
support</h4>
<p>Add the ability, for an application that uses libcurl, to obtain the
list of capabilities returned from the CAPA command.</p>
<h3 id="9-imap">9. IMAP</h3>
<h4 id="91-enhanced-capability-support">9.1 Enhanced capability
support</h4>
<p>Add the ability, for an application that uses libcurl, to obtain the
list of capabilities returned from the CAPABILITY command.</p>
<h3 id="10-ldap">10. LDAP</h3>
<h4 id="101-sasl-based-authentication-mechanisms">10.1 SASL based
authentication mechanisms</h4>
<p>Currently the LDAP module only supports ldap_simple_bind_s() in order
to bind to an LDAP server. However, this function sends username and
password details using the simple authentication mechanism (as clear
text). However, it should be possible to use ldap_bind_s() instead
specifying the security context information ourselves.</p>
<h4 id="102-curlopt_ssl_ctx_function-for-ldaps">10.2
CURLOPT_SSL_CTX_FUNCTION for LDAPS</h4>
<p>CURLOPT_SSL_CTX_FUNCTION works perfectly for HTTPS and email
protocols, but it has no effect for LDAPS connections.</p>
<p><a
href="https://github.com/curl/curl/issues/4108">https://github.com/curl/curl/issues/4108</a></p>
<h4 id="103-paged-searches-on-ldap-server">10.3 Paged searches on LDAP
server</h4>
<p><a
href="https://github.com/curl/curl/issues/4452">https://github.com/curl/curl/issues/4452</a></p>
<h4 id="104-certificate-based-authentication">10.4 Certificate-Based
Authentication</h4>
<p>LDAPS not possible with macOS and Windows with Certificate-Based
Authentication</p>
<p><a
href="https://github.com/curl/curl/issues/9641">https://github.com/curl/curl/issues/9641</a></p>
<h3 id="11-smb">11. SMB</h3>
<h4 id="111-file-listing-support">11.1 File listing support</h4>
<p>Add support for listing the contents of an SMB share. The output
should probably be the same as/similar to FTP.</p>
<h4 id="112-honor-file-timestamps">11.2 Honor file timestamps</h4>
<p>The timestamp of the transferred file should reflect that of the
original file.</p>
<h4 id="113-use-ntlmv2">11.3 Use NTLMv2</h4>
<p>Currently the SMB authentication uses NTLMv1.</p>
<h4 id="114-create-remote-directories">11.4 Create remote
directories</h4>
<p>Support for creating remote directories when uploading a file to a
directory that does not exist on the server, just like
--ftp-create-dirs.</p>
<h3 id="12-file">12. FILE</h3>
<h4 id="121-directory-listing-on-non-posix">12.1 Directory listing on
non-POSIX</h4>
<p>Listing the contents of a directory accessed with FILE only works on
platforms with opendir. Support could be added for more systems, like
Windows.</p>
<h3 id="13-tls">13. TLS</h3>
<h4 id="131-tls-psk-with-openssl">13.1 TLS-PSK with OpenSSL</h4>
<p>Transport Layer Security pre-shared key ciphersuites (TLS-PSK) is a
set of cryptographic protocols that provide secure communication based
on pre-shared keys (PSKs). These pre-shared keys are symmetric keys
shared in advance among the communicating parties.</p>
<p><a
href="https://github.com/curl/curl/issues/5081">https://github.com/curl/curl/issues/5081</a></p>
<h4 id="132-tls-channel-binding">13.2 TLS channel binding</h4>
<p>TLS 1.2 and 1.3 provide the ability to extract some secret data from
the TLS connection and use it in the client request (usually in some
sort of authentication) to ensure that the data sent is bound to the
specific TLS connection and cannot be successfully intercepted by a
proxy. This functionality can be used in a standard authentication
mechanism such as GSS-API or SCRAM, or in custom approaches like custom
HTTP Authentication headers.</p>
<p>For TLS 1.2, the binding type is usually tls-unique, and for TLS 1.3
it is tls-exporter.</p>
<p><a
href="https://datatracker.ietf.org/doc/html/rfc5929">https://datatracker.ietf.org/doc/html/rfc5929</a>
<a
href="https://datatracker.ietf.org/doc/html/rfc9266">https://datatracker.ietf.org/doc/html/rfc9266</a>
<a
href="https://github.com/curl/curl/issues/9226">https://github.com/curl/curl/issues/9226</a></p>
<h4 id="133-defeat-tls-fingerprinting">13.3 Defeat TLS
fingerprinting</h4>
<p>By changing the order of TLS extensions provided in the TLS
handshake, it is sometimes possible to circumvent TLS fingerprinting by
servers. The TLS extension order is of course not the only way to
fingerprint a client.</p>
<h4 id="134-consider-ocsp-stapling-by-default">13.4 Consider OCSP
stapling by default</h4>
<p>Treat a negative response a reason for aborting the connection. Since
OCSP stapling is presumed to get used much less in the future when Let's
Encrypt drops the OCSP support, the benefit of this might however be
limited.</p>
<p><a
href="https://github.com/curl/curl/issues/15483">https://github.com/curl/curl/issues/15483</a></p>
<h4 id="136-provide-callback-for-cert-verification">13.6 Provide
callback for cert verification</h4>
<p>OpenSSL supports a callback for customised verification of the peer
certificate, but this does not seem to be exposed in the libcurl APIs.
Could it be? There is so much that could be done if it were.</p>
<h4 id="137-less-memory-massaging-with-schannel">13.7 Less memory
massaging with Schannel</h4>
<p>The Schannel backend does a lot of custom memory management we would
rather avoid: the repeated alloc + free in sends and the custom memory +
realloc system for encrypted and decrypted data. That should be avoided
and reduced for 1) efficiency and 2) safety.</p>
<h4 id="138-support-dane">13.8 Support DANE</h4>
<p>DNS-Based Authentication of Named Entities (DANE) is a way to provide
SSL keys and certs over DNS using DNSSEC as an alternative to the CA
model. <a
href="https://www.rfc-editor.org/rfc/rfc6698.txt">https://www.rfc-editor.org/rfc/rfc6698.txt</a></p>
<p>An initial patch was posted by Suresh Krishnaswamy on March 7th 2013
(<a
href="https://curl.se/mail/lib-2013-03/0075.html">https://curl.se/mail/lib-2013-03/0075.html</a>)
but it was a too simple approach. See Daniel's comments: <a
href="https://curl.se/mail/lib-2013-03/0103.html">https://curl.se/mail/lib-2013-03/0103.html</a>
. libunbound may be the correct library to base this development on.</p>
<p>Bjrn Stenberg wrote a separate initial take on DANE that was never
completed.</p>
<h4 id="139-tls-record-padding">13.9 TLS record padding</h4>
<p>TLS (1.3) offers optional record padding and OpenSSL provides an API
for it. I could make sense for libcurl to offer this ability to
applications to make traffic patterns harder to figure out by network
traffic observers.</p>
<p>See <a
href="https://github.com/curl/curl/issues/5398">https://github.com/curl/curl/issues/5398</a></p>
<h4
id="1310-support-authority-information-access-certificate-extension-aia">13.10
Support Authority Information Access certificate extension (AIA)</h4>
<p>AIA can provide various things like CRLs but more importantly
information about intermediate CA certificates that can allow validation
path to be fulfilled when the HTTPS server does not itself provide
them.</p>
<p>Since AIA is about downloading certs on demand to complete a TLS
handshake, it is probably a bit tricky to get done right.</p>
<p>See <a
href="https://github.com/curl/curl/issues/2793">https://github.com/curl/curl/issues/2793</a></p>
<h4 id="1311-some-tls-options-are-not-offered-for-https-proxies">13.11
Some TLS options are not offered for HTTPS proxies</h4>
<p>Some TLS related options to the command line tool and libcurl are
only provided for the server and not for HTTPS proxies. --proxy-tls-max,
--proxy-tlsv1.3, --proxy-curves and a few more. For more Documentation
on this see: <a
href="https://curl.se/libcurl/c/tls-options.html">https://curl.se/libcurl/c/tls-options.html</a></p>
<p><a
href="https://github.com/curl/curl/issues/12286">https://github.com/curl/curl/issues/12286</a></p>
<h4
id="1313-make-sure-we-forbid-tls-13-post-handshake-authentication">13.13
Make sure we forbid TLS 1.3 post-handshake authentication</h4>
<p>RFC 8740 explains how using HTTP/2 must forbid the use of TLS 1.3
post-handshake authentication. We should make sure to live up to
that.</p>
<p>See <a
href="https://github.com/curl/curl/issues/5396">https://github.com/curl/curl/issues/5396</a></p>
<h4 id="1314-support-the-clienthello-extension">13.14 Support the
clienthello extension</h4>
<p>Certain stupid networks and middle boxes have a problem with SSL
handshake packets that are within a certain size range because how that
sets some bits that previously (in older TLS version) were not set. The
clienthello extension adds padding to avoid that size range.</p>
<p><a
href="https://datatracker.ietf.org/doc/html/rfc7685">https://datatracker.ietf.org/doc/html/rfc7685</a>
<a
href="https://github.com/curl/curl/issues/2299">https://github.com/curl/curl/issues/2299</a></p>
<h4 id="1316-share-the-ca-cache">13.16 Share the CA cache</h4>
<p>For TLS backends that supports CA caching, it makes sense to allow
the share object to be used to store the CA cache as well via the share
API. Would allow multiple easy handles to reuse the CA cache and save
themselves from a lot of extra processing overhead.</p>
<h4 id="1317-add-missing-features-to-tls-backends">13.17 Add missing
features to TLS backends</h4>
<p>The feature matrix at <a
href="https://curl.se/libcurl/c/tls-options.html">https://curl.se/libcurl/c/tls-options.html</a>
shows which features are supported by which TLS backends, and thus also
where there are feature gaps.</p>
<h3 id="14-proxy">14. Proxy</h3>
<h4 id="141-retry-socks-handshake-on-address-type-not-supported">14.1
Retry SOCKS handshake on address type not supported</h4>
<p>When curl resolves a hostname, it might get a mix of IPv6 and IPv4
returned. curl might then use an IPv6 address with a SOCKS5 proxy, which
- if it does not support IPv6 - returns "Address type not supported" and
curl exits with that error.</p>
<p>Perhaps it is preferred if curl would in this situation instead first
retry the SOCKS handshake again for this case and then use one of the
IPv4 addresses for the target host.</p>
<p>See <a
href="https://github.com/curl/curl/issues/17222">https://github.com/curl/curl/issues/17222</a></p>
<h3 id="15-schannel">15. Schannel</h3>
<h4 id="151-extend-support-for-client-certificate-authentication">15.1
Extend support for client certificate authentication</h4>
<p>The existing support for the -E/--cert and --key options could be
extended by supplying a custom certificate and key in PEM format,
see:</p>
<ul>
<li>Getting a Certificate for Schannel <a
href="https://learn.microsoft.com/windows/win32/secauthn/getting-a-certificate-for-schannel">https://learn.microsoft.com/windows/win32/secauthn/getting-a-certificate-for-schannel</a></li>
</ul>
<h4 id="152-extend-support-for-the---ciphers-option">15.2 Extend support
for the --ciphers option</h4>
<p>The existing support for the --ciphers option could be extended by
mapping the OpenSSL/GnuTLS cipher suites to the Schannel APIs, see</p>
<ul>
<li>Specifying Schannel Ciphers and Cipher Strengths <a
href="https://learn.microsoft.com/windows/win32/secauthn/specifying-schannel-ciphers-and-cipher-strengths">https://learn.microsoft.com/windows/win32/secauthn/specifying-schannel-ciphers-and-cipher-strengths</a></li>
</ul>
<h4 id="154-add-option-to-allow-abrupt-server-closure">15.4 Add option
to allow abrupt server closure</h4>
<p>libcurl with Schannel errors without a known termination point from
the server (such as length of transfer, or SSL "close notify" alert) to
prevent against a truncation attack. Really old servers may neglect to
send any termination point. An option could be added to ignore such
abrupt closures.</p>
<p><a
href="https://github.com/curl/curl/issues/4427">https://github.com/curl/curl/issues/4427</a></p>
<h3 id="16-sasl">16. SASL</h3>
<h4 id="161-other-authentication-mechanisms">16.1 Other authentication
mechanisms</h4>
<p>Add support for other authentication mechanisms such as OLP,
GSS-SPNEGO and others.</p>
<h4 id="162-add-qop-support-to-gssapi-authentication">16.2 Add QOP
support to GSSAPI authentication</h4>
<p>Currently the GSSAPI authentication only supports the default QOP of
auth (Authentication), whilst Kerberos V5 supports both auth-int
(Authentication with integrity protection) and auth-conf (Authentication
with integrity and privacy protection).</p>
<h3 id="17-ssh-protocols">17. SSH protocols</h3>
<h4 id="171-multiplexing">17.1 Multiplexing</h4>
<p>SSH is a perfectly fine multiplexed protocols which would allow
libcurl to do multiple parallel transfers from the same host using the
same connection, much in the same spirit as HTTP/2 does. libcurl however
does not take advantage of that ability but does instead always create a
new connection for new transfers even if an existing connection already
exists to the host.</p>
<p>To fix this, libcurl would have to detect an existing connection and
"attach" the new transfer to the existing one.</p>
<h4 id="172-handle-growing-sftp-files">17.2 Handle growing SFTP
files</h4>
<p>The SFTP code in libcurl checks the file size <em>before</em> a
transfer starts and then proceeds to transfer exactly that amount of
data. If the remote file grows while the transfer is in progress libcurl
does not notice and does not adapt. The OpenSSH SFTP command line tool
does and libcurl could also just attempt to download more to see if
there is more to get...</p>
<p><a
href="https://github.com/curl/curl/issues/4344">https://github.com/curl/curl/issues/4344</a></p>
<h4 id="173-read-keys-from-sshid_ecdsa-id_ed25519">17.3 Read keys from
~/.ssh/id_ecdsa, id_ed25519</h4>
<p>The libssh2 backend in curl is limited to only reading keys from
id_rsa and id_dsa, which makes it fail connecting to servers that use
more modern key types.</p>
<p><a
href="https://github.com/curl/curl/issues/8586">https://github.com/curl/curl/issues/8586</a></p>
<h4 id="174-support-curlopt_prequote">17.4 Support CURLOPT_PREQUOTE</h4>
<p>The two other QUOTE options are supported for SFTP, but this was left
out for unknown reasons.</p>
<h4 id="175-ssh-over-https-proxy-with-more-backends">17.5 SSH over HTTPS
proxy with more backends</h4>
<p>The SSH based protocols SFTP and SCP did not work over HTTPS proxy at
all until PR <a
href="https://github.com/curl/curl/pull/6021">https://github.com/curl/curl/pull/6021</a>
brought the functionality with the libssh2 backend. Presumably, this
support can/could be added for the other backends as well.</p>
<h4 id="176-sftp-with-scp">17.6 SFTP with SCP://</h4>
<p>OpenSSH 9 switched their 'scp' tool to speak SFTP under the hood.
Going forward it might be worth having curl or libcurl attempt SFTP if
SCP fails to follow suite.</p>
<h3 id="18-command-line-tool">18. Command line tool</h3>
<h4 id="181-sync">18.1 sync</h4>
<p>"curl --sync <a
href="http://example.com/feed">http://example.com/feed</a>[1-100].rss"
or "curl --sync <a
href="http://example.net/">http://example.net/</a>{index,calendar,history}.html"</p>
<p>Downloads a range or set of URLs using the remote name, but only if
the remote file is newer than the local file. A Last-Modified HTTP date
header should also be used to set the mod date on the downloaded
file.</p>
<h4 id="182-glob-posts">18.2 glob posts</h4>
<p>Globbing support for -d and -F, as in 'curl -d "name=foo[0-9]" URL'.
This is easily scripted though.</p>
<h4 id="184---proxycommand">18.4 --proxycommand</h4>
<p>Allow the user to make curl run a command and use its stdio to make
requests and not do any network connection by itself. Example:</p>
<p>curl --proxycommand 'ssh <a
href="mailto:pi@raspberrypi.local">pi@raspberrypi.local</a> -W 10.1.1.75
80'<br />
http://some/otherwise/unavailable/service.php</p>
<p>See <a
href="https://github.com/curl/curl/issues/4941">https://github.com/curl/curl/issues/4941</a></p>
<h4 id="185-utf-8-filenames-in-content-disposition">18.5 UTF-8 filenames
in Content-Disposition</h4>
<p>RFC 6266 documents how UTF-8 names can be passed to a client in the
Content-Disposition header, and curl does not support this.</p>
<p><a
href="https://github.com/curl/curl/issues/1888">https://github.com/curl/curl/issues/1888</a></p>
<h4 id="186-option-to-make--z-merge-lined-based-outputs-on-stdout">18.6
Option to make -Z merge lined based outputs on stdout</h4>
<p>When a user requests multiple lined based files using -Z and sends
them to stdout, curl does not "merge" and send complete lines fine but
may send partial lines from several sources.</p>
<p><a
href="https://github.com/curl/curl/issues/5175">https://github.com/curl/curl/issues/5175</a></p>
<h4
id="187-specify-which-response-codes-that-make--f--fail-return-error">18.7
specify which response codes that make -f/--fail return error</h4>
<p>Allows a user to better specify exactly which error code(s) that are
fine and which are errors for their specific uses cases</p>
<h4 id="189-choose-the-name-of-file-in-braces-for-complex-urls">18.9
Choose the name of file in braces for complex URLs</h4>
<p>When using braces to download a list of URLs and you use complicated
names in the list of alternatives, it could be handy to allow curl to
use other names when saving.</p>
<p>Consider a way to offer that. Possibly like
{partURL1:name1,partURL2:name2,partURL3:name3} where the name following
the colon is the output name.</p>
<p>See <a
href="https://github.com/curl/curl/issues/221">https://github.com/curl/curl/issues/221</a></p>
<h4 id="1810-improve-how-curl-works-in-a-windows-console-window">18.10
improve how curl works in a Windows console window</h4>
<p>If you pull the scrollbar when transferring with curl in a Windows
console window, the transfer is interrupted and can get disconnected.
This can probably be improved. See <a
href="https://github.com/curl/curl/issues/322">https://github.com/curl/curl/issues/322</a></p>
<h4
id="1811-windows-set-attribute-archive-for-completed-downloads">18.11
Windows: set attribute 'archive' for completed downloads</h4>
<p>The archive bit (FILE_ATTRIBUTE_ARCHIVE, 0x20) separates files that
shall be backed up from those that are either not ready or have not
changed.</p>
<p>Downloads in progress are neither ready to be backed up, nor should
they be opened by a different process. Only after a download has been
completed it is sensible to include it in any integer snapshot or backup
of the system.</p>
<p>See <a
href="https://github.com/curl/curl/issues/3354">https://github.com/curl/curl/issues/3354</a></p>
<h4 id="1812-keep-running-read-instructions-from-pipesocket">18.12 keep
running, read instructions from pipe/socket</h4>
<p>Provide an option that makes curl not exit after the last URL (or
even work without a given URL), and then make it read instructions
passed on a pipe or over a socket to make further instructions so that a
second subsequent curl invoke can talk to the still running instance and
ask for transfers to get done, and thus maintain its connection pool,
DNS cache and more.</p>
<h4 id="1813-acknowledge-ratelimit-headers">18.13 Acknowledge Ratelimit
headers</h4>
<p>Consider a command line option that can make curl do multiple serial
requests while acknowledging server specified rate limits: <a
href="https://datatracker.ietf.org/doc/draft-ietf-httpapi-ratelimit-headers/">https://datatracker.ietf.org/doc/draft-ietf-httpapi-ratelimit-headers/</a></p>
<p>See <a
href="https://github.com/curl/curl/issues/5406">https://github.com/curl/curl/issues/5406</a></p>
<h4 id="1814---dry-run">18.14 --dry-run</h4>
<p>A command line option that makes curl show exactly what it would do
and send if it would run for real.</p>
<p>See <a
href="https://github.com/curl/curl/issues/5426">https://github.com/curl/curl/issues/5426</a></p>
<h4 id="1815---retry-should-resume">18.15 --retry should resume</h4>
<p>When --retry is used and curl actually retries transfer, it should
use the already transferred data and do a resumed transfer for the rest
(when possible) so that it does not have to transfer the same data again
that was already transferred before the retry.</p>
<p>See <a
href="https://github.com/curl/curl/issues/1084">https://github.com/curl/curl/issues/1084</a></p>
<h4 id="1817-consider-filename-from-the-redirected-url-with--o-">18.17
consider filename from the redirected URL with -O ?</h4>
<p>When a user gives a URL and uses -O, and curl follows a redirect to a
new URL, the filename is not extracted and used from the newly
redirected-to URL even if the new URL may have a much more sensible
filename.</p>
<p>This is clearly documented and helps for security since there is no
surprise to users which filename that might get overwritten, but maybe a
new option could allow for this or maybe -J should imply such a
treatment as well as -J already allows for the server to decide what
filename to use so it already provides the "may overwrite any file"
risk.</p>
<p>This is extra tricky if the original URL has no filename part at all
since then the current code path does error out with an error message,
and we cannot <em>know</em> already at that point if curl is redirected
to a URL that has a filename...</p>
<p>See <a
href="https://github.com/curl/curl/issues/1241">https://github.com/curl/curl/issues/1241</a></p>
<h4 id="1818-retry-on-network-is-unreachable">18.18 retry on network is
unreachable</h4>
<p>The --retry option retries transfers on "transient failures". We
later added --retry-connrefused to also retry for "connection refused"
errors.</p>
<p>Suggestions have been brought to also allow retry on "network is
unreachable" errors and while totally reasonable, maybe we should
consider a way to make this more configurable than to add a new option
for every new error people want to retry for?</p>
<p><a
href="https://github.com/curl/curl/issues/1603">https://github.com/curl/curl/issues/1603</a></p>
<h4 id="1820-hostname-sections-in-config-files">18.20 hostname sections
in config files</h4>
<p>config files would be more powerful if they could set different
configurations depending on used URLs, hostname or possibly origin. Then
a default .curlrc could a specific user-agent only when doing requests
against a certain site.</p>
<h4 id="1821-retry-on-the-redirected-to-url">18.21 retry on the
redirected-to URL</h4>
<p>When curl is told to --retry a failed transfer and follows redirects,
it might get an HTTP 429 response from the redirected-to URL and not the
original one, which then could make curl decide to rather retry the
transfer on that URL only instead of the original operation to the
original URL.</p>
<p>Perhaps extra emphasized if the original transfer is a large POST
that redirects to a separate GET, and that GET is what gets the 529</p>
<p>See <a
href="https://github.com/curl/curl/issues/5462">https://github.com/curl/curl/issues/5462</a></p>
<h4 id="1823-set-the-modification-date-on-an-uploaded-file">18.23 Set
the modification date on an uploaded file</h4>
<p>For SFTP and possibly FTP, curl could offer an option to set the
modification time for the uploaded file.</p>
<p>See <a
href="https://github.com/curl/curl/issues/5768">https://github.com/curl/curl/issues/5768</a></p>
<h4
id="1824-use-multiple-parallel-transfers-for-a-single-download">18.24
Use multiple parallel transfers for a single download</h4>
<p>To enhance transfer speed, downloading a single URL can be split up
into multiple separate range downloads that get combined into a single
final result.</p>
<p>An ideal implementation would not use a specified number of parallel
transfers, but curl could:</p>
<ul>
<li>First start getting the full file as transfer A</li>
<li>If after N seconds have passed and the transfer is expected to
continue for M seconds or more, add a new transfer (B) that asks for the
second half of A's content (and stop A at the middle).</li>
<li>If splitting up the work improves the transfer rate, it could then
be done again. Then again, etc up to a limit.</li>
</ul>
<p>This way, if transfer B fails (because Range: is not supported) it
lets transfer A remain the single one. N and M could be set to some
sensible defaults.</p>
<p>See <a
href="https://github.com/curl/curl/issues/5774">https://github.com/curl/curl/issues/5774</a></p>
<h4 id="1825-prevent-terminal-injection-when-writing-to-terminal">18.25
Prevent terminal injection when writing to terminal</h4>
<p>curl could offer an option to make escape sequence either
non-functional or avoid cursor moves or similar to reduce the risk of a
user getting tricked by clever tricks.</p>
<p>See <a
href="https://github.com/curl/curl/issues/6150">https://github.com/curl/curl/issues/6150</a></p>
<h4 id="1826-custom-progress-meter-update-interval">18.26 Custom
progress meter update interval</h4>
<p>Users who are for example doing large downloads in CI or remote
setups might want the occasional progress meter update to see that the
transfer is progressing and has not stuck, but they may not appreciate
the many-times-a-second frequency curl can end up doing it with now.</p>
<h4 id="1827--j-and--o-with--encoded-filenames">18.27 -J and -O with
%-encoded filenames</h4>
<p>-J/--remote-header-name does not decode %-encoded filenames. RFC 6266
details how it should be done. The can of worm is basically that we have
no charset handling in curl and ASCII &gt;=128 is a challenge for us.
Not to mention that decoding also means that we need to check for
nastiness that is attempted, like "../" sequences and the like. Probably
everything to the left of any embedded slashes should be cut off. <a
href="https://curl.se/bug/view.cgi?id=1294">https://curl.se/bug/view.cgi?id=1294</a></p>
<p>-O also does not decode %-encoded names, and while it has even less
information about the charset involved the process is similar to the -J
case.</p>
<p>Note that we do not decode -O without the user asking for it with
some other means, since -O has always been documented to use the name
exactly as specified in the URL.</p>
<h4 id="1828--j-with--c--">18.28 -J with -C -</h4>
<p>When using -J (with -O), automatically resumed downloading together
with "-C -" fails. Without -J the same command line works. This happens
because the resume logic is worked out before the target filename (and
thus its pre-transfer size) has been figured out. This can be
improved.</p>
<p><a
href="https://curl.se/bug/view.cgi?id=1169">https://curl.se/bug/view.cgi?id=1169</a></p>
<h4 id="1829---retry-and-transfer-timeouts">18.29 --retry and transfer
timeouts</h4>
<p>If using --retry and the transfer timeouts (possibly due to using -m
or -y/-Y) the next attempt does not resume the transfer properly from
what was downloaded in the previous attempt but truncates and restarts
at the original position where it was at before the previous failed
attempt. See <a
href="https://curl.se/mail/lib-2008-01/0080.html">https://curl.se/mail/lib-2008-01/0080.html</a>
and Mandriva bug report <a
href="https://qa.mandriva.com/show_bug.cgi?id=22565">https://qa.mandriva.com/show_bug.cgi?id=22565</a></p>
<h3 id="19-build">19. Build</h3>
<h4 id="192-enable-pie-and-relro-by-default">19.2 Enable PIE and RELRO
by default</h4>
<p>Especially when having programs that execute curl via the command
line, PIE renders the exploitation of memory corruption vulnerabilities
a lot more difficult. This can be attributed to the additional
information leaks being required to conduct a successful attack. RELRO,
on the other hand, masks different binary sections like the GOT as
read-only and thus kills a handful of techniques that come in handy when
attackers are able to arbitrarily overwrite memory. A few tests showed
that enabling these features had close to no impact, neither on the
performance nor on the general functionality of curl.</p>
<h4 id="193-do-not-use-gnu-libtool-on-openbsd">19.3 Do not use GNU
libtool on OpenBSD</h4>
<p>When compiling curl on OpenBSD with "--enable-debug" it gives linking
errors when you use GNU libtool. This can be fixed by using the libtool
provided by OpenBSD itself. However for this the user always needs to
invoke make with "LIBTOOL=/usr/bin/libtool". It would be nice if the
script could have some magic to detect if this system is an OpenBSD host
and then use the OpenBSD libtool instead.</p>
<p>See <a
href="https://github.com/curl/curl/issues/5862">https://github.com/curl/curl/issues/5862</a></p>
<h4 id="194-package-curl-for-windows-in-a-signed-installer">19.4 Package
curl for Windows in a signed installer</h4>
<p>See <a
href="https://github.com/curl/curl/issues/5424">https://github.com/curl/curl/issues/5424</a></p>
<h4 id="195-make-configure-use---cache-file-more-and-better">19.5 make
configure use --cache-file more and better</h4>
<p>The configure script can be improved to cache more values so that
repeated invokes run much faster.</p>
<p>See <a
href="https://github.com/curl/curl/issues/7753">https://github.com/curl/curl/issues/7753</a></p>
<h3 id="20-test-suite">20. Test suite</h3>
<h4 id="201-ssl-tunnel">20.1 SSL tunnel</h4>
<p>Make our own version of stunnel for simple port forwarding to enable
HTTPS and FTP-SSL tests without the stunnel dependency, and it could
allow us to provide test tools built with either OpenSSL or GnuTLS</p>
<h4 id="202-more-protocols-supported">20.2 more protocols supported</h4>
<p>Extend the test suite to include more protocols. The telnet could
just do FTP or http operations (for which we have test servers).</p>
<h4 id="203-more-platforms-supported">20.3 more platforms supported</h4>
<p>Make the test suite work on more platforms. OpenBSD and macOS. Remove
fork()s and it should become even more portable.</p>
<h4 id="204-write-an-smb-test-server-to-replace-impacket">20.4 write an
SMB test server to replace impacket</h4>
<p>This would allow us to run SMB tests on more platforms and do better
and more covering tests.</p>
<p>See <a
href="https://github.com/curl/curl/issues/15697">https://github.com/curl/curl/issues/15697</a></p>
<h4 id="205-use-the-rfc-6265-test-suite">20.5 Use the RFC 6265 test
suite</h4>
<p>A test suite made for HTTP cookies (RFC 6265) by Adam Barth is
available at <a
href="https://github.com/abarth/http-state/tree/master/tests">https://github.com/abarth/http-state/tree/master/tests</a></p>
<p>It would be good if someone would write a script/setup that would run
curl with that test suite and detect deviances. Ideally, that would even
be incorporated into our regular test suite.</p>
<h4 id="206-run-web-platform-tests-url-tests">20.6 Run
web-platform-tests URL tests</h4>
<p>Run web-platform-tests URL tests and compare results with browsers on
wpt.fyi</p>
<p>It would help us find issues to fix and help us document where our
parser differs from the WHATWG URL spec parsers.</p>
<p>See <a
href="https://github.com/curl/curl/issues/4477">https://github.com/curl/curl/issues/4477</a></p>
<h3 id="21-mqtt">21. MQTT</h3>
<h4 id="211-support-rate-limiting">21.1 Support rate-limiting</h4>
<p>The rate-limiting logic is done in the PERFORMING state in multi.c
but MQTT is not (yet) implemented to use that.</p>
<h4 id="212-support-mqttsmqtts">21.2 Support MQTTSMQTTS</h4>
<h4 id="213-handle-network-blocks">21.3 Handle network blocks</h4>
<p>Running test suite with
<code>CURL_DBG_SOCK_WBLOCK=90 ./runtests.pl -a mqtt</code> makes several
MQTT test cases fail where they should not.</p>
<h4 id="214-large-payloads">21.4 large payloads</h4>
<p>libcurl unnecessarily allocates heap memory to hold the entire
payload to get sent, when the data is already perfectly accessible where
it is when <code>CURLOPT_POSTFIELDS</code> is used. This is highly
inefficient for larger payloads. Additionally, libcurl does not support
using the read callback for sending MQTT which is yet another way to
avoid having to hold large payload in memory.</p>
<h3 id="22-tftp">22. TFTP</h3>
<h4 id="221-tftp-does-not-convert-lf-to-crlf-for-modenetascii">22.1 TFTP
does not convert LF to CRLF for mode=netascii</h4>
<p>RFC 3617 defines that an TFTP transfer can be done using "netascii"
mode. curl does not support extracting that mode from the URL nor does
it treat such transfers specifically. It should probably do LF to CRLF
translations for them.</p>
<p>See <a
href="https://github.com/curl/curl/issues/12655">https://github.com/curl/curl/issues/12655</a></p>
<h3 id="23-gopher">23. Gopher</h3>
<h4 id="231-handle-network-blocks">23.1 Handle network blocks</h4>
<p>Running test suite with
<code>CURL_DBG_SOCK_WBLOCK=90 ./runtests.pl -a 1200 to 1300</code> makes
several Gopher test cases fail where they should not.</p>
</div>
</div>
</body>
</html>
