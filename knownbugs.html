<!DOCTYPE html>
<html>
<head> <title>curl - Known Bugs</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<link rel="stylesheet" type="text/css" href="curl.css">
<link rel="shortcut icon" href="favicon.ico">
<link rel="icon" href="logo/curl-symbol.svg" type="image/svg+xml">
<link rel="alternate" type="application/rss+xml" title="cURL Releases" href="https://github.com/curl/curl/releases.atom">
</head>
<body>
<div class="main">
<div class="menu">
<a href="/docs/" class="menuitem" title="Documentation Overview">Docs Overview</a>
<div class="dropdown">
  <a class="dropbtn" href="/docs/projdocs.html">Project</a>
  <div class="dropdown-content">
    <a href="/docs/bugbounty.html">Bug Bounty</a>
    <a href="/docs/bugs.html">Bug Report</a>
    <a href="/docs/code-of-conduct.html">Code of conduct</a>
    <a href="/docs/libs.html">Dependencies</a>
    <a href="/donation.html">Donate</a>
    <a href="/docs/faq.html">FAQ</a>
    <a href="/docs/features.html">Features</a>
    <a href="/docs/governance.html">Governance</a>
    <a href="/docs/history.html">History</a>
    <a href="/docs/install.html">Install</a>
    <a href="/docs/knownbugs.html">Known Bugs</a>
    <a href="/docs/knownrisks.html">Known Risks</a>
    <a href="/logo/">Logo</a>
    <a href="/docs/todo.html">TODO</a>
    <a href="/about.html">website Info</a>
  </div>
</div>
<div class="dropdown">
  <a class="dropbtn" href="/docs/protdocs.html">Protocols</a>
  <div class="dropdown-content">
    <a href="/docs/caextract.html">CA Extract</a>
    <a href="/docs/http-cookies.html">HTTP cookies</a>
    <a href="/docs/http3.html">HTTP/3</a>
    <a href="/docs/mqtt.html">MQTT</a>
    <a href="/docs/sslcerts.html">SSL certs</a>
    <a href="/docs/ssl-compared.html">SSL libs compared</a>
    <a href="/docs/url-syntax.html">URL syntax</a>
    <a href="/docs/websocket.html">WebSocket</a>
  </div>
</div>
<div class="dropdown">
  <a class="dropbtn" href="/docs/reldocs.html">Releases</a>
  <div class="dropdown-content">
    <a href="/ch/">Changelog</a>
    <a href="/docs/security.html">curl CVEs</a>
    <a href="/docs/releases.html">Release Table</a>
    <a href="/docs/versions.html">Version Numbering</a>
    <a href="/docs/vulnerabilities.html">Vulnerabilities</a>
  </div>
</div>
<div class="dropdown">
  <a class="dropbtn" href="/docs/tooldocs.html">Tool</a>
  <div class="dropdown-content">
    <a href="/docs/comparison-table.html">Comparison Table</a>
    <a href="/docs/manpage.html">curl man page</a>
    <a href="/docs/httpscripting.html">HTTP Scripting</a>
    <a href="/docs/mk-ca-bundle.html">mk-ca-bundle</a>
    <a href="/docs/tutorial.html">Tutorial</a>
    <a href="optionswhen.html">When options were added</a>
  </div>
</div>
<div class="dropdown">
  <a class="dropbtn" href="/docs/whodocs.html">Who and Why</a>
  <div class="dropdown-content">
    <a href="/docs/companies.html">Companies</a>
    <a href="/docs/copyright.html">Copyright</a>
    <a href="/sponsors.html">Sponsors</a>
    <a href="/docs/thanks.html">Thanks</a>
    <a href="/docs/thename.html">The name</a>
  </div>
</div>
</div>
<div class="contents">
<div class="where"><a href="/">curl</a> / <a href="/docs/">Docs</a> / <a href="/docs/projdocs.html">Project</a> / <b>Known Bugs</b></div>
<h1> Known Bugs </h1>
<div class="relatedbox">
<b>Related:</b>
<br><a href="/dev/deprecate.html">Deprecate</a>
<br><a href="bugs.html">How To Report Bugs</a>
<br><a href="todo.html">TODO</a>
</div>
<p>
 This is the document 'docs/KNOWN_BUGS' from the curl release archive.
<h2><a href="#HTTP">HTTP</a></h2>
<h2><a href="#TLS">TLS</a></h2>
<p>
<a href="#IMAPS_connection_fails_with_Rust">IMAPS connection fails with Rustls error</a><br>
<a href="#Access_violation_sending_client">Access violation sending client cert with Schannel</a><br>
<a href="#Client_cert_handling_with_Issuer">Client cert handling with Issuer DN differs between backends</a><br>
<a href="#Client_cert_MTLS_issues_with_S">Client cert (MTLS) issues with Schannel</a><br>
<a href="#Schannel_TLS_1_2_handshake_bug_i">Schannel TLS 1.2 handshake bug in old Windows versions</a><br>
<a href="#CURLOPT_CERTINFO_results_in_CURL">CURLOPT_CERTINFO results in CURLE_OUT_OF_MEMORY with Schannel</a><br>
<a href="#mbedTLS_and_CURLE_AGAIN_handling">mbedTLS and CURLE_AGAIN handling</a><br>
</p>
<h2><a href="#Email-protocols">Email protocols</a></h2>
<p>
<a href="#IMAP_SEARCH_ALL_truncated_respon">IMAP SEARCH ALL truncated response</a><br>
<a href="#No_disconnect_command">No disconnect command</a><br>
<a href="#AUTH_PLAIN_for_SMTP_is_not_worki">AUTH PLAIN for SMTP is not working on all servers</a><br>
<a href="#APOP_authentication_fails_on_POP">APOP authentication fails on POP3</a><br>
<a href="#POP3_issue_when_reading_small_ch">POP3 issue when reading small chunks</a><br>
</p>
<h2><a href="#Command-line">Command line</a></h2>
<p>
<a href="#T_dev_stdin_may_upload_with_an">-T /dev/stdin may upload with an incorrect content length</a><br>
<a href="#T_always_uploads_chunked">-T - always uploads chunked</a><br>
</p>
<h2><a href="#Build-and-portability-issues">Build and portability issues</a></h2>
<p>
<a href="#OS400_port_requires_deprecated_I">OS400 port requires deprecated IBM library</a><br>
<a href="#curl_config_libs_contains_priv">curl-config --libs contains private details</a><br>
<a href="#LDFLAGS_passed_too_late_making_l">LDFLAGS passed too late making libs linked incorrectly</a><br>
<a href="#Cygwin_make_install_installs_cu">Cygwin: make install installs curl-config.1 twice</a><br>
<a href="#flaky_CI_builds">flaky CI builds</a><br>
<a href="#long_paths_are_not_fully_support">long paths are not fully supported on Windows</a><br>
<a href="#Unicode_on_Windows">Unicode on Windows</a><br>
</p>
<h2><a href="#Authentication">Authentication</a></h2>
<p>
<a href="#Digest_auth_int_for_PUT_POST">Digest auth-int for PUT/POST</a><br>
<a href="#MIT_Kerberos_for_Windows_build">MIT Kerberos for Windows build</a><br>
<a href="#NTLM_in_system_context_uses_wron">NTLM in system context uses wrong name</a><br>
<a href="#NTLM_does_not_support_password_w">NTLM does not support password with Unicode 'SECTION SIGN' character</a><br>
<a href="#libcurl_can_fail_to_try_alternat">libcurl can fail to try alternatives with --proxy-any</a><br>
<a href="#Do_not_clear_digest_for_single_r">Do not clear digest for single realm</a><br>
<a href="#SHA_256_digest_not_supported_in">SHA-256 digest not supported in Windows SSPI builds</a><br>
<a href="#curl_never_completes_Negotiate_o">curl never completes Negotiate over HTTP</a><br>
<a href="#Negotiate_on_Windows_fails">Negotiate on Windows fails</a><br>
<a href="#Negotiate_against_Hadoop_HDFS">Negotiate against Hadoop HDFS</a><br>
</p>
<h2><a href="#FTP">FTP</a></h2>
<p>
<a href="#FTP_with_ACCT">FTP with ACCT</a><br>
<a href="#FTPS_directory_listing_hangs_on">FTPS directory listing hangs on Windows with Schannel</a><br>
</p>
<h2><a href="#SFTP-and-SCP">SFTP and SCP</a></h2>
<p>
<a href="#SFTP_does_not_do_CURLOPT_POSTQUO">SFTP does not do CURLOPT_POSTQUOTE correct</a><br>
<a href="#Remote_recursive_folder_creation">Remote recursive folder creation with SFTP</a><br>
<a href="#libssh_blocking_and_infinite_loo">libssh blocking and infinite loop problem</a><br>
<a href="#Cygwin_WARNING_UNPROTECTED_PR">Cygwin: "WARNING: UNPROTECTED PRIVATE KEY FILE!"</a><br>
</p>
<h2><a href="#Connection">Connection</a></h2>
<p>
<a href="#interface_with_link_scoped_IPv">--interface with link-scoped IPv6 address</a><br>
<a href="#Does_not_acknowledge_getaddrinfo">Does not acknowledge getaddrinfo sorting policy</a><br>
<a href="#SOCKS_SSPI_discards_the_security">SOCKS-SSPI discards the security context</a><br>
</p>
<h2><a href="#Internals">Internals</a></h2>
<p>
<a href="#gssapi_library_name_version_is">gssapi library name + version is missing in curl_version_info()</a><br>
<a href="#error_buffer_not_set_if_connecti">error buffer not set if connection to multiple addresses fails</a><br>
<a href="#HTTP_test_server_connection_mon">HTTP test server 'connection-monitor' problems</a><br>
<a href="#Connection_information_when_usin">Connection information when using TCP Fast Open</a><br>
<a href="#test_cases_sometimes_timeout">test cases sometimes timeout</a><br>
<a href="#CURLOPT_CONNECT_TO_does_not_work">CURLOPT_CONNECT_TO does not work for HTTPS proxy</a><br>
<a href="#WinIDN_test_failures">WinIDN test failures</a><br>
<a href="#setting_a_disabled_option_should">setting a disabled option should return CURLE_NOT_BUILT_IN</a><br>
</p>
<h2><a href="#LDAP">LDAP</a></h2>
<p>
<a href="#OpenLDAP_hangs_after_returning_r">OpenLDAP hangs after returning results</a><br>
<a href="#LDAP_on_Windows_does_authenticat">LDAP on Windows does authentication wrong?</a><br>
<a href="#LDAP_on_Windows_does_not_work">LDAP on Windows does not work</a><br>
<a href="#LDAPS_requests_to_ActiveDirector">LDAPS requests to ActiveDirectory server hang</a><br>
</p>
<h2><a href="#TCPIP">TCP/IP</a></h2>
<p>
<a href="#telnet_code_does_not_handle_part">telnet code does not handle partial writes properly</a><br>
<a href="#Trying_local_ports_fails_on_Wind">Trying local ports fails on Windows</a><br>
</p>
<h2><a href="#CMake">CMake</a></h2>
<p>
<a href="#cmake_outputs_no_version_inform">cmake outputs: no version information available</a><br>
<a href="#uses_lpthread_instead_of_Thread">uses -lpthread instead of Threads::Threads</a><br>
<a href="#generated_pc_file_contains_stra">generated .pc file contains strange entries</a><br>
<a href="#CMake_build_with_MIT_Kerberos_do">CMake build with MIT Kerberos does not work</a><br>
</p>
<h2><a href="#awssigv4">aws-sigv4</a></h2>
<p>
<a href="#aws_sigv4_does_not_handle_multip">aws-sigv4 does not handle multipart/form-data correctly</a><br>
</p>
<h2><a href="#HTTP2">HTTP/2</a></h2>
<p>
<a href="#HTTP_2_prior_knowledge_over_prox">HTTP/2 prior knowledge over proxy</a><br>
<a href="#HTTP_2_frames_while_in_the_conne">HTTP/2 frames while in the connection pool kill reuse</a><br>
<a href="#ENHANCE_YOUR_CALM_causes_infinit">ENHANCE_YOUR_CALM causes infinite retries</a><br>
<a href="#HTTP_2_TLS_spends_a_lot_of_tim">HTTP/2 + TLS spends a lot of time in recv</a><br>
</p>
<h2><a href="#HTTP3">HTTP/3</a></h2>
<p>
<a href="#connection_migration_does_not_wo">connection migration does not work</a><br>
<a href="#quiche_QUIC_connection_is_drain">quiche: QUIC connection is draining</a><br>
<a href="#OpenSSL_QUIC_problems_on_google">OpenSSL-QUIC problems on google.com</a><br>
</p>
<h2><a href="#RTSP">RTSP</a></h2>
<p>
<a href="#Some_methods_do_not_support_resp">Some methods do not support response bodies</a><br>
</p>
<!-- CONTENT WITH MODIFIED IDS -->
<p> <!--
Copyright (C) Daniel Stenberg, <daniel@haxx.se>, et al.</p>
<p>SPDX-License-Identifier: curl
--></p>
<p>These are problems and bugs known to exist at the time of this release. Feel
free to join in and help us correct one or more of these. Also be sure to
check the changelog of the current development status, as one or more of these
problems may have been fixed or changed somewhat since this was written.</p>
<h2 id="HTTP">HTTP</h2>
<h2 id="TLS">TLS</h2>
<h3 id="IMAPS_connection_fails_with_Rust">IMAPS connection fails with Rustls error</h3>
<p>See <a href="https://github.com/curl/curl/issues/10457">curl/curl#10457</a></p>
<h3 id="Access_violation_sending_client">Access violation sending client cert with Schannel</h3>
<p>When using Schannel to do client certs, curl sets `PKCS12_NO_PERSIST_KEY` to
avoid leaking the private key into the filesystem. Unfortunately that flag
instead seems to trigger a crash.</p>
<p>See <a href="https://github.com/curl/curl/issues/17626">curl/curl#17626</a></p>
<h3 id="Client_cert_handling_with_Issuer">Client cert handling with Issuer DN differs between backends</h3>
<p>When the specified client certificate does not match any of the
server-specified DNs, the OpenSSL and GnuTLS backends behave differently.
The github discussion may contain a solution.</p>
<p>See <a href="https://github.com/curl/curl/issues/1411">curl/curl#1411</a></p>
<h3 id="Client_cert_MTLS_issues_with_S">Client cert (MTLS) issues with Schannel</h3>
<p>See <a href="https://github.com/curl/curl/issues/3145">curl/curl#3145</a></p>
<h3 id="Schannel_TLS_1_2_handshake_bug_i">Schannel TLS 1.2 handshake bug in old Windows versions</h3>
<p>In old versions of Windows such as 7 and 8.1 the Schannel TLS 1.2 handshake
implementation likely has a bug that can rarely cause the key exchange to
fail, resulting in error `SEC_E_BUFFER_TOO_SMALL` or `SEC_E_MESSAGE_ALTERED`.</p>
<p>See <a href="https://github.com/curl/curl/issues/5488">curl/curl#5488</a></p>
<h3 id="CURLOPT_CERTINFO_results_in_CURL">CURLOPT_CERTINFO results in CURLE_OUT_OF_MEMORY with Schannel</h3>
<p>See <a href="https://github.com/curl/curl/issues/8741">curl/curl#8741</a></p>
<h3 id="mbedTLS_and_CURLE_AGAIN_handling">mbedTLS and CURLE_AGAIN handling</h3>
<p>See <a href="https://github.com/curl/curl/issues/15801">curl/curl#15801</a></p>
<h2 id="Email-protocols">Email protocols</h2>
<h3 id="IMAP_SEARCH_ALL_truncated_respon">IMAP SEARCH ALL truncated response</h3>
<p>IMAP "SEARCH ALL" truncates output on large boxes. "A quick search of the
code reveals that `pingpong.c` contains some truncation code, at line 408, when
it deems the server response to be too large truncating it to 40 characters"</p>
<p>See <a href="https://curl.se/bug/view.cgi?id=1366">https://curl.se/bug/view.cgi?id=1366</a></p>
<h3 id="No_disconnect_command">No disconnect command</h3>
<p>The disconnect commands (`LOGOUT` and `QUIT`) may not be sent by IMAP, POP3 and
SMTP if a failure occurs during the authentication phase of a connection.</p>
<h3 id="AUTH_PLAIN_for_SMTP_is_not_worki">AUTH PLAIN for SMTP is not working on all servers</h3>
<p>Specifying `--login-options AUTH=PLAIN` on the command line does not seem to
work correctly.</p>
<p>See <a href="https://github.com/curl/curl/issues/4080">curl/curl#4080</a></p>
<h3 id="APOP_authentication_fails_on_POP">APOP authentication fails on POP3</h3>
<p>See <a href="https://github.com/curl/curl/issues/10073">curl/curl#10073</a></p>
<h3 id="POP3_issue_when_reading_small_ch">POP3 issue when reading small chunks</h3>
<p>`CURL_DBG_SOCK_RMAX=4 ./runtests.pl -v 982`</p>
<p>See <a href="https://github.com/curl/curl/issues/12063">curl/curl#12063</a></p>
<h2 id="Command-line">Command line</h2>
<h3 id="T_dev_stdin_may_upload_with_an">-T /dev/stdin may upload with an incorrect content length</h3>
<p>`-T` stats the path to figure out its size in bytes to use it as
`Content-Length` if it is a regular file.</p>
<p>The problem with that is that, on BSDs and some other UNIXes (not Linux),
`open(path)` may not give you a file descriptor with a 0 offset from the start
of the file.</p>
<p>See <a href="https://github.com/curl/curl/issues/12177">curl/curl#12177</a></p>
<h3 id="T_always_uploads_chunked">-T - always uploads chunked</h3>
<p>When the `<` shell operator is used. curl should realise that stdin is a
regular file in this case, and that it can do a non-chunked upload, like it
would do if you used `-T file`.</p>
<p>See <a href="https://github.com/curl/curl/issues/12171">curl/curl#12171</a></p>
<h2 id="Build-and-portability-issues">Build and portability issues</h2>
<h3 id="OS400_port_requires_deprecated_I">OS400 port requires deprecated IBM library</h3>
<p>curl for OS400 requires `QADRT` to build, which provides ASCII wrappers for
libc/POSIX functions in the ILE, but IBM no longer supports or even offers
this library to download.</p>
<p>See <a href="https://github.com/curl/curl/issues/5176">curl/curl#5176</a></p>
<h3 id="curl_config_libs_contains_priv">curl-config --libs contains private details</h3>
<p>`curl-config --libs` include details set in `LDFLAGS` when configure is run
that might be needed only for building libcurl. Further, `curl-config --cflags`
suffers from the same effects with `CFLAGS`/`CPPFLAGS`.</p>
<h3 id="LDFLAGS_passed_too_late_making_l">LDFLAGS passed too late making libs linked incorrectly</h3>
<p>Compiling latest curl on HP-UX and linking against a custom OpenSSL (which is
on the default loader/linker path), fails because the generated `Makefile` has
`LDFLAGS` passed on after `LIBS`.</p>
<p>See <a href="https://github.com/curl/curl/issues/14893">curl/curl#14893</a></p>
<h3 id="Cygwin_make_install_installs_cu">Cygwin: make install installs curl-config.1 twice</h3>
<p>See <a href="https://github.com/curl/curl/issues/8839">curl/curl#8839</a></p>
<h3 id="flaky_CI_builds">flaky CI builds</h3>
<p>We run many CI builds for each commit and PR on github, and especially a
number of the Windows builds are flaky. This means that we rarely get all CI
builds go green and complete without errors. This is unfortunate as it makes
us sometimes miss actual build problems and it is surprising to newcomers to
the project who (rightfully) do not expect this.</p>
<p>See <a href="https://github.com/curl/curl/issues/6972">curl/curl#6972</a></p>
<h3 id="long_paths_are_not_fully_support">long paths are not fully supported on Windows</h3>
<p>curl on Windows cannot access long paths (paths longer than 260 characters).
However, as a workaround, the Windows path prefix `\\?\` which disables all
path interpretation may work to allow curl to access the path. For example:
`\\?\c:\longpath`.</p>
<p>See <a href="https://github.com/curl/curl/issues/8361">curl/curl#8361</a></p>
<h3 id="Unicode_on_Windows">Unicode on Windows</h3>
<p>Passing in a Unicode filename with `-o`:</p>
<p>See <a href="https://github.com/curl/curl/issues/11461">curl/curl#11461</a></p>
<p>Passing in Unicode character with `-d`:</p>
<p>See <a href="https://github.com/curl/curl/issues/12231">curl/curl#12231</a></p>
<p>Windows Unicode builds use homedir in current locale</p>
<p>The Windows Unicode builds use the current locale, but expect Unicode
UTF-8 encoded paths for internal use such as `open`, `access` and `stat`. The
user's home directory is retrieved via `curl_getenv` in the current locale and
not as UTF-8 encoded Unicode. See:</p>
<p>- <a href="https://github.com/curl/curl/pull/7252">curl/curl#7252</a>
- <a href="https://github.com/curl/curl/pull/7281">curl/curl#7281</a></p>
<p>Cannot handle Unicode arguments in non-Unicode builds on Windows</p>
<p>If a URL or filename cannot be encoded using the user's current codepage then
it can only be encoded properly in the Unicode character set. Windows uses
UTF-16 encoding for Unicode and stores it in wide characters, however curl
and libcurl are not equipped for that at the moment except when built with
`_UNICODE` and `UNICODE` defined. Except for Cygwin, Windows cannot use UTF-8
as a locale. See:</p>
<p>- https://curl.se/bug/?i=345
- https://curl.se/bug/?i=731
- https://curl.se/bug/?i=3747NTLM authentication and Unicode</p>
<p>NTLM authentication involving Unicode username or password only works
properly if built with `UNICODE` defined together with the Schannel backend.
The original problem was mentioned in:</p>
<p>- https://curl.se/mail/lib-2009-10/0024.html
- https://curl.se/bug/view.cgi?id=896</p>
<p>The Schannel version verified to work as mentioned in
https://curl.se/mail/lib-2012-07/0073.html</p>
<h2 id="Authentication">Authentication</h2>
<h3 id="Digest_auth_int_for_PUT_POST">Digest auth-int for PUT/POST</h3>
<p>We do not support auth-int for Digest using `PUT` or `POST`</p>
<h3 id="MIT_Kerberos_for_Windows_build">MIT Kerberos for Windows build</h3>
<p>libcurl fails to build with MIT Kerberos for Windows (`KfW`) due to `KfW`'s
library header files exporting symbols/macros that should be kept private to
the `KfW` library.</p>
<p>See ticket #5601 at https://krbdev.mit.edu/rt/</p>
<h3 id="NTLM_in_system_context_uses_wron">NTLM in system context uses wrong name</h3>
<p>NTLM authentication using SSPI (on Windows) when (lib)curl is running in
"system context" makes it use wrong(?) username - at least when compared to
what winhttp does.</p>
<p>See https://curl.se/bug/view.cgi?id=535</p>
<h3 id="NTLM_does_not_support_password_w">NTLM does not support password with Unicode 'SECTION SIGN' character</h3>
<p>See:</p>
<p>- [en.wikipedia.org/Section_sign](https://en.wikipedia.org/wiki/Section_sign)
- [codepoints.net/U+00A7](https://codepoints.net/U+00A7) SECTION SIGN
- <a href="https://github.com/curl/curl/issues/2120">curl/curl#2120</a></p>
<h3 id="libcurl_can_fail_to_try_alternat">libcurl can fail to try alternatives with --proxy-any</h3>
<p>When connecting via a proxy using `--proxy-any`, a failure to establish an
authentication causes libcurl to abort trying other options if the failed
method has a higher preference than the alternatives. As an example,
`--proxy-any` against a proxy which advertise Negotiate and NTLM, but which
fails to set up Kerberos authentication does not proceed to try
authentication using NTLM.</p>
<p>See <a href="https://github.com/curl/curl/issues/876">curl/curl#876</a></p>
<h3 id="Do_not_clear_digest_for_single_r">Do not clear digest for single realm</h3>
<p>See <a href="https://github.com/curl/curl/issues/3267">curl/curl#3267</a></p>
<h3 id="SHA_256_digest_not_supported_in">SHA-256 digest not supported in Windows SSPI builds</h3>
<p>Windows builds of curl that have SSPI enabled use the native Windows API calls
to create authentication strings. The call to `InitializeSecurityContext` fails
with `SEC_E_QOP_NOT_SUPPORTED` which causes curl to fail with
`CURLE_AUTH_ERROR`.</p>
<p>Microsoft does not document supported digest algorithms and that SEC_E error
code is not a documented error for `InitializeSecurityContext` (digest).</p>
<p>See <a href="https://github.com/curl/curl/issues/6302">curl/curl#6302</a></p>
<h3 id="curl_never_completes_Negotiate_o">curl never completes Negotiate over HTTP</h3>
<p>Apparently it is not working correctly...?</p>
<p>See <a href="https://github.com/curl/curl/issues/5235">curl/curl#5235</a></p>
<h3 id="Negotiate_on_Windows_fails">Negotiate on Windows fails</h3>
<p>When using `--negotiate` (or NTLM) with curl on Windows, SSL/TLS handshake
fails despite having a valid kerberos ticket cached. Works without any issue
in Unix/Linux.</p>
<p>See <a href="https://github.com/curl/curl/issues/5881">curl/curl#5881</a></p>
<h3 id="Negotiate_against_Hadoop_HDFS">Negotiate against Hadoop HDFS</h3>
<p>See <a href="https://github.com/curl/curl/issues/8264">curl/curl#8264</a></p>
<h2 id="FTP">FTP</h2>
<h3 id="FTP_with_ACCT">FTP with ACCT</h3>
<p>When doing an operation over FTP that requires the `ACCT` command (but not when
logging in), the operation fails since libcurl does not detect this and thus
fails to issue the correct command.</p>
<p>See https://curl.se/bug/view.cgi?id=635</p>
<h3 id="FTPS_directory_listing_hangs_on">FTPS directory listing hangs on Windows with Schannel</h3>
<p>FTPS is not widely used with the Schannel TLS backend and so there may be
more bugs compared to other TLS backends such as OpenSSL. In the past users
have reported hanging and failed connections. It is likely some changes to
curl since then fixed the issues. None of the reported issues can be
reproduced any longer.</p>
<p>If you encounter an issue connecting to your server via FTPS with the latest
curl and Schannel then please search for open issues or file a new issue.</p>
<h2 id="SFTP-and-SCP">SFTP and SCP</h2>
<h3 id="SFTP_does_not_do_CURLOPT_POSTQUO">SFTP does not do CURLOPT_POSTQUOTE correct</h3>
<p>When libcurl sends `CURLOPT_POSTQUOTE` commands when connected to an SFTP
server using the multi interface, the commands are not being sent correctly
and instead the connection is "cancelled" (the operation is considered done)
prematurely. There is a half-baked (busy-looping) patch provided in the bug
report but it cannot be accepted as-is.</p>
<p>See https://curl.se/bug/view.cgi?id=748</p>
<h3 id="Remote_recursive_folder_creation">Remote recursive folder creation with SFTP</h3>
<p>On this servers, the curl fails to create directories on the remote server
even when the `CURLOPT_FTP_CREATE_MISSING_DIRS` option is set.</p>
<p>See <a href="https://github.com/curl/curl/issues/5204">curl/curl#5204</a></p>
<h3 id="libssh_blocking_and_infinite_loo">libssh blocking and infinite loop problem</h3>
<p>In the `SSH_SFTP_INIT` state for libssh, the ssh session working mode is set to
blocking mode. If the network is suddenly disconnected during sftp
transmission, curl is stuck, even if curl is configured with a timeout.</p>
<p>See <a href="https://github.com/curl/curl/issues/8632">curl/curl#8632</a></p>
<h3 id="Cygwin_WARNING_UNPROTECTED_PR">Cygwin: "WARNING: UNPROTECTED PRIVATE KEY FILE!"</h3>
<p>Running SCP and SFTP tests on Cygwin makes this warning message appear.</p>
<p>See <a href="https://github.com/curl/curl/issues/11244">curl/curl#11244</a></p>
<h2 id="Connection">Connection</h2>
<h3 id="interface_with_link_scoped_IPv">--interface with link-scoped IPv6 address</h3>
<p>When you give the `--interface` option telling curl to use a specific
interface for its outgoing traffic in combination with an IPv6 address in the
URL that uses a link-local scope, curl might pick the wrong address from the
named interface and the subsequent transfer fails.</p>
<p>Example command line:</p>
<p>    curl --interface eth0 'http://[fe80:928d:xxff:fexx:xxxx]/'</p>
<p>The fact that the given IP address is link-scoped should probably be used as
input to somehow make curl make a better choice for this.</p>
<p>See <a href="https://github.com/curl/curl/issues/14782">curl/curl#14782</a></p>
<h3 id="Does_not_acknowledge_getaddrinfo">Does not acknowledge getaddrinfo sorting policy</h3>
<p>Even if a user edits `/etc/gai.conf` to prefer IPv4, curl still prefers and
tries IPv6 addresses first.</p>
<p>See <a href="https://github.com/curl/curl/issues/16718">curl/curl#16718</a></p>
<h3 id="SOCKS_SSPI_discards_the_security">SOCKS-SSPI discards the security context</h3>
<p>After a successful SSPI/GSS-API exchange, the function queries and logs the
authenticated username and reports the supported data-protection level, but
then immediately deletes the negotiated SSPI security context and frees the
credentials before returning. The negotiated context is not stored on the
connection and is therefore never used to protect later SOCKS5 traffic.</p>
<h2 id="Internals">Internals</h2>
<h3 id="gssapi_library_name_version_is">gssapi library name + version is missing in curl_version_info()</h3>
<p>The struct needs to be expanded and code added to store this info.</p>
<p>See <a href="https://github.com/curl/curl/issues/13492">curl/curl#13492</a></p>
<h3 id="error_buffer_not_set_if_connecti">error buffer not set if connection to multiple addresses fails</h3>
<p>If you ask libcurl to resolve a hostname like example.com to IPv6 addresses
when you only have IPv4 connectivity. libcurl fails with
`CURLE_COULDNT_CONNECT`, but the error buffer set by `CURLOPT_ERRORBUFFER`
remains empty.</p>
<p>See issue: <a href="https://github.com/curl/curl/issues/544">curl/curl#544</a></p>
<h3 id="HTTP_test_server_connection_mon">HTTP test server 'connection-monitor' problems</h3>
<p>The "connection-monitor" feature of the `sws` HTTP test server does not work
properly if some tests are run in unexpected order. Like 1509 and then 1525.</p>
<p>See <a href="https://github.com/curl/curl/issues/868">curl/curl#868</a></p>
<h3 id="Connection_information_when_usin">Connection information when using TCP Fast Open</h3>
<p>`CURLINFO_LOCAL_PORT` (and possibly a few other) fails when TCP Fast Open is
enabled. See:</p>
<p>- <a href="https://github.com/curl/curl/issues/1332">curl/curl#1332</a>
- <a href="https://github.com/curl/curl/issues/4296">curl/curl#4296</a></p>
<h3 id="test_cases_sometimes_timeout">test cases sometimes timeout</h3>
<p>Occasionally, one of the tests timeouts. Inexplicably.</p>
<p>See <a href="https://github.com/curl/curl/issues/13350">curl/curl#13350</a></p>
<h3 id="CURLOPT_CONNECT_TO_does_not_work">CURLOPT_CONNECT_TO does not work for HTTPS proxy</h3>
<p>It is unclear if the same option should even cover the proxy connection or if
if requires a separate option.</p>
<p>See <a href="https://github.com/curl/curl/issues/14481">curl/curl#14481</a></p>
<h3 id="WinIDN_test_failures">WinIDN test failures</h3>
<p>Test 165 disabled when built with WinIDN.</p>
<h3 id="setting_a_disabled_option_should">setting a disabled option should return CURLE_NOT_BUILT_IN</h3>
<p>When curl has been built with specific features or protocols disabled,
setting such options with `curl_easy_setopt()` should rather return
`CURLE_NOT_BUILT_IN` instead of `CURLE_UNKNOWN_OPTION` to signal the difference
to the application.</p>
<p>See <a href="https://github.com/curl/curl/issues/15472">curl/curl#15472</a></p>
<h2 id="LDAP">LDAP</h2>
<h3 id="OpenLDAP_hangs_after_returning_r">OpenLDAP hangs after returning results</h3>
<p>By configuration defaults, OpenLDAP automatically chase referrals on
secondary socket descriptors. The OpenLDAP backend is asynchronous and thus
should monitor all socket descriptors involved. Currently, these secondary
descriptors are not monitored, causing OpenLDAP library to never receive
data from them.</p>
<p>As a temporary workaround, disable referrals chasing by configuration.</p>
<p>The fix is not easy: proper automatic referrals chasing requires a
synchronous bind callback and monitoring an arbitrary number of socket
descriptors for a single easy handle (currently limited to 5).</p>
<p>Generic LDAP is synchronous: OK. See:</p>
<p>- <a href="https://github.com/curl/curl/issues/622">curl/curl#622</a>
- https://curl.se/mail/lib-2016-01/0101.html</p>
<h3 id="LDAP_on_Windows_does_authenticat">LDAP on Windows does authentication wrong?</h3>
<p>See <a href="https://github.com/curl/curl/issues/3116">curl/curl#3116</a></p>
<h3 id="LDAP_on_Windows_does_not_work">LDAP on Windows does not work</h3>
<p>A simple curl command line getting "ldap://ldap.forumsys.com" returns an
error that says "no memory" !</p>
<p>See <a href="https://github.com/curl/curl/issues/4261">curl/curl#4261</a></p>
<h3 id="LDAPS_requests_to_ActiveDirector">LDAPS requests to ActiveDirectory server hang</h3>
<p>See <a href="https://github.com/curl/curl/issues/9580">curl/curl#9580</a></p>
<h2 id="TCPIP">TCP/IP</h2>
<h3 id="telnet_code_does_not_handle_part">telnet code does not handle partial writes properly</h3>
<p>It probably does not happen too easily because of how slow and infrequent
sends are normally performed.</p>
<h3 id="Trying_local_ports_fails_on_Wind">Trying local ports fails on Windows</h3>
<p>This makes `--local-port [range]` to not work since curl cannot properly
detect if a port is already in use, so it tries the first port, uses that and
then subsequently fails anyway if that was actually in use.</p>
<p>See <a href="https://github.com/curl/curl/issues/8112">curl/curl#8112</a></p>
<h2 id="CMake">CMake</h2>
<h3 id="cmake_outputs_no_version_inform">cmake outputs: no version information available</h3>
<p>Something in the `SONAME` generation seems to be wrong in the cmake build.</p>
<p>See <a href="https://github.com/curl/curl/issues/11158">curl/curl#11158</a></p>
<h3 id="uses_lpthread_instead_of_Thread">uses -lpthread instead of Threads::Threads</h3>
<p>See <a href="https://github.com/curl/curl/issues/6166">curl/curl#6166</a></p>
<h3 id="generated_pc_file_contains_stra">generated .pc file contains strange entries</h3>
<p>The `Libs.private` field of the generated `.pc` file contains `-lgcc`
`-lgcc_s` `-lc` `-lgcc` `-lgcc_s`.</p>
<p>See <a href="https://github.com/curl/curl/issues/6167">curl/curl#6167</a></p>
<h3 id="CMake_build_with_MIT_Kerberos_do">CMake build with MIT Kerberos does not work</h3>
<p>Minimum CMake version was bumped in curl 7.71.0 (#5358) Since CMake 3.2
try_compile started respecting the `CMAKE_EXE_FLAGS`. The code dealing with
MIT Kerberos detection sets few variables to potentially weird mix of space,
and ;-separated flags. It had to blow up at some point. All the CMake checks
that involve compilation are doomed from that point, the configured tree
cannot be built.</p>
<p>See <a href="https://github.com/curl/curl/issues/6904">curl/curl#6904</a></p>
<h2 id="awssigv4">aws-sigv4</h2>
<h3 id="aws_sigv4_does_not_handle_multip">aws-sigv4 does not handle multipart/form-data correctly</h3>
<p>See <a href="https://github.com/curl/curl/issues/13351">curl/curl#13351</a></p>
<h2 id="HTTP2">HTTP/2</h2>
<h3 id="HTTP_2_prior_knowledge_over_prox">HTTP/2 prior knowledge over proxy</h3>
<p>See <a href="https://github.com/curl/curl/issues/12641">curl/curl#12641</a></p>
<h3 id="HTTP_2_frames_while_in_the_conne">HTTP/2 frames while in the connection pool kill reuse</h3>
<p>If the server sends HTTP/2 frames (like for example an HTTP/2 `PING` frame) to
curl while the connection is held in curl's connection pool, the socket is
found readable when considered for reuse and that makes curl think it is dead
and then it is closed and a new connection gets created instead.</p>
<p>This is *best* fixed by adding monitoring to connections while they are kept
in the pool so that pings can be responded to appropriately.</p>
<h3 id="ENHANCE_YOUR_CALM_causes_infinit">ENHANCE_YOUR_CALM causes infinite retries</h3>
<p>Infinite retries with 2 parallel requests on one connection receiving `GOAWAY`
with `ENHANCE_YOUR_CALM` error code.</p>
<p>See <a href="https://github.com/curl/curl/issues/5119">curl/curl#5119</a></p>
<h3 id="HTTP_2_TLS_spends_a_lot_of_tim">HTTP/2 + TLS spends a lot of time in recv</h3>
<p>It has been observed that by making the speed limit less accurate we could
improve this performance. (by reverting
<a href="https://github.com/curl/curl/commit/db5c9f4f9e0779b49624752b135281a0717b277b">https://github.com/curl/curl/commit/db5c9f4f9e0779b49624752b135281a0717b277b</a>
) Can we find a golden middle ground? See:</p>
<p>- https://curl.se/mail/lib-2024-05/0026.html
- <a href="https://github.com/curl/curl/issues/13416">curl/curl#13416</a></p>
<h2 id="HTTP3">HTTP/3</h2>
<h3 id="connection_migration_does_not_wo">connection migration does not work</h3>
<p>See <a href="https://github.com/curl/curl/issues/7695">curl/curl#7695</a></p>
<h3 id="quiche_QUIC_connection_is_drain">quiche: QUIC connection is draining</h3>
<p>The transfer ends with error "QUIC connection is draining".</p>
<p>See <a href="https://github.com/curl/curl/issues/12037">curl/curl#12037</a></p>
<h3 id="OpenSSL_QUIC_problems_on_google">OpenSSL-QUIC problems on google.com</h3>
<p>With some specific Google servers, and seemingly timing dependent, the
OpenSSL-QUIC backend seems to not actually send off the HTTP/3 request which
makes the QUIC connection just sit idle until killed by the server. curl or
OpenSSL bug?</p>
<p>See <a href="https://github.com/curl/curl/issues/18336">curl/curl#18336</a></p>
<h2 id="RTSP">RTSP</h2>
<h3 id="Some_methods_do_not_support_resp">Some methods do not support response bodies</h3>
<p>The RTSP implementation is written to assume that a number of RTSP methods
always get responses without bodies, even though there seems to be no
indication in the RFC that this is always the case.</p>
<p>See <a href="https://github.com/curl/curl/issues/12414">curl/curl#12414</a></p>
 <!--
Copyright (C) Daniel Stenberg, <daniel@haxx.se>, et al.
SPDX-License-Identifier: curl
-->
<h1 id="known-bugs">Known Bugs</h1>
<p>These are problems and bugs known to exist at the time of this
release. Feel free to join in and help us correct one or more of these.
Also be sure to check the changelog of the current development status,
as one or more of these problems may have been fixed or changed somewhat
since this was written.</p>
<h2 id="http">HTTP</h2>
<h2 id="tls">TLS</h2>
<h3 id="imaps-connection-fails-with-rustls-error">IMAPS connection fails
with Rustls error</h3>
<p>See <a
href="https://github.com/curl/curl/issues/10457">https://github.com/curl/curl/issues/10457</a></p>
<h3 id="access-violation-sending-client-cert-with-schannel">Access
violation sending client cert with Schannel</h3>
<p>When using Schannel to do client certs, curl sets
<code>PKCS12_NO_PERSIST_KEY</code> to avoid leaking the private key into
the filesystem. Unfortunately that flag instead seems to trigger a
crash.</p>
<p>See <a
href="https://github.com/curl/curl/issues/17626">https://github.com/curl/curl/issues/17626</a></p>
<h3
id="client-cert-handling-with-issuer-dn-differs-between-backends">Client
cert handling with Issuer DN differs between backends</h3>
<p>When the specified client certificate does not match any of the
server-specified DNs, the OpenSSL and GnuTLS backends behave
differently. The github discussion may contain a solution.</p>
<p>See <a
href="https://github.com/curl/curl/issues/1411">https://github.com/curl/curl/issues/1411</a></p>
<h3 id="client-cert-mtls-issues-with-schannel">Client cert (MTLS) issues
with Schannel</h3>
<p>See <a
href="https://github.com/curl/curl/issues/3145">https://github.com/curl/curl/issues/3145</a></p>
<h3 id="schannel-tls-12-handshake-bug-in-old-windows-versions">Schannel
TLS 1.2 handshake bug in old Windows versions</h3>
<p>In old versions of Windows such as 7 and 8.1 the Schannel TLS 1.2
handshake implementation likely has a bug that can rarely cause the key
exchange to fail, resulting in error <code>SEC_E_BUFFER_TOO_SMALL</code>
or <code>SEC_E_MESSAGE_ALTERED</code>.</p>
<p>See <a
href="https://github.com/curl/curl/issues/5488">https://github.com/curl/curl/issues/5488</a></p>
<h3
id="curlopt_certinfo-results-in-curle_out_of_memory-with-schannel">CURLOPT_CERTINFO
results in CURLE_OUT_OF_MEMORY with Schannel</h3>
<p>See <a
href="https://github.com/curl/curl/issues/8741">https://github.com/curl/curl/issues/8741</a></p>
<h3 id="mbedtls-and-curle_again-handling">mbedTLS and CURLE_AGAIN
handling</h3>
<p>See <a
href="https://github.com/curl/curl/issues/15801">https://github.com/curl/curl/issues/15801</a></p>
<h2 id="email-protocols">Email protocols</h2>
<h3 id="imap-search-all-truncated-response">IMAP SEARCH ALL truncated
response</h3>
<p>IMAP "SEARCH ALL" truncates output on large boxes. "A quick search of
the code reveals that <code>pingpong.c</code> contains some truncation
code, at line 408, when it deems the server response to be too large
truncating it to 40 characters"</p>
<p>See <a
href="https://curl.se/bug/view.cgi?id=1366">https://curl.se/bug/view.cgi?id=1366</a></p>
<h3 id="no-disconnect-command">No disconnect command</h3>
<p>The disconnect commands (<code>LOGOUT</code> and <code>QUIT</code>)
may not be sent by IMAP, POP3 and SMTP if a failure occurs during the
authentication phase of a connection.</p>
<h3 id="auth-plain-for-smtp-is-not-working-on-all-servers">AUTH PLAIN
for SMTP is not working on all servers</h3>
<p>Specifying <code>--login-options AUTH=PLAIN</code> on the command
line does not seem to work correctly.</p>
<p>See <a
href="https://github.com/curl/curl/issues/4080">https://github.com/curl/curl/issues/4080</a></p>
<h3 id="apop-authentication-fails-on-pop3">APOP authentication fails on
POP3</h3>
<p>See <a
href="https://github.com/curl/curl/issues/10073">https://github.com/curl/curl/issues/10073</a></p>
<h3 id="pop3-issue-when-reading-small-chunks">POP3 issue when reading
small chunks</h3>
<p><code>CURL_DBG_SOCK_RMAX=4 ./runtests.pl -v 982</code></p>
<p>See <a
href="https://github.com/curl/curl/issues/12063">https://github.com/curl/curl/issues/12063</a></p>
<h2 id="command-line">Command line</h2>
<h3 id="-t-devstdin-may-upload-with-an-incorrect-content-length">-T
/dev/stdin may upload with an incorrect content length</h3>
<p><code>-T</code> stats the path to figure out its size in bytes to use
it as <code>Content-Length</code> if it is a regular file.</p>
<p>The problem with that is that, on BSDs and some other UNIXes (not
Linux), <code>open(path)</code> may not give you a file descriptor with
a 0 offset from the start of the file.</p>
<p>See <a
href="https://github.com/curl/curl/issues/12177">https://github.com/curl/curl/issues/12177</a></p>
<h3 id="-t---always-uploads-chunked">-T - always uploads chunked</h3>
<p>When the <code>&lt;</code> shell operator is used. curl should
realise that stdin is a regular file in this case, and that it can do a
non-chunked upload, like it would do if you used
<code>-T file</code>.</p>
<p>See <a
href="https://github.com/curl/curl/issues/12171">https://github.com/curl/curl/issues/12171</a></p>
<h2 id="build-and-portability-issues">Build and portability issues</h2>
<h3 id="os400-port-requires-deprecated-ibm-library">OS400 port requires
deprecated IBM library</h3>
<p>curl for OS400 requires <code>QADRT</code> to build, which provides
ASCII wrappers for libc/POSIX functions in the ILE, but IBM no longer
supports or even offers this library to download.</p>
<p>See <a
href="https://github.com/curl/curl/issues/5176">https://github.com/curl/curl/issues/5176</a></p>
<h3 id="curl-config---libs-contains-private-details">curl-config --libs
contains private details</h3>
<p><code>curl-config --libs</code> include details set in
<code>LDFLAGS</code> when configure is run that might be needed only for
building libcurl. Further, <code>curl-config --cflags</code> suffers
from the same effects with
<code>CFLAGS</code>/<code>CPPFLAGS</code>.</p>
<h3 id="ldflags-passed-too-late-making-libs-linked-incorrectly">LDFLAGS
passed too late making libs linked incorrectly</h3>
<p>Compiling latest curl on HP-UX and linking against a custom OpenSSL
(which is on the default loader/linker path), fails because the
generated <code>Makefile</code> has <code>LDFLAGS</code> passed on after
<code>LIBS</code>.</p>
<p>See <a
href="https://github.com/curl/curl/issues/14893">https://github.com/curl/curl/issues/14893</a></p>
<h3 id="cygwin-make-install-installs-curl-config1-twice">Cygwin: make
install installs curl-config.1 twice</h3>
<p>See <a
href="https://github.com/curl/curl/issues/8839">https://github.com/curl/curl/issues/8839</a></p>
<h3 id="flaky-ci-builds">flaky CI builds</h3>
<p>We run many CI builds for each commit and PR on github, and
especially a number of the Windows builds are flaky. This means that we
rarely get all CI builds go green and complete without errors. This is
unfortunate as it makes us sometimes miss actual build problems and it
is surprising to newcomers to the project who (rightfully) do not expect
this.</p>
<p>See <a
href="https://github.com/curl/curl/issues/6972">https://github.com/curl/curl/issues/6972</a></p>
<h3 id="long-paths-are-not-fully-supported-on-windows">long paths are
not fully supported on Windows</h3>
<p>curl on Windows cannot access long paths (paths longer than 260
characters). However, as a workaround, the Windows path prefix
<code>\\?\</code> which disables all path interpretation may work to
allow curl to access the path. For example:
<code>\\?\c:\longpath</code>.</p>
<p>See <a
href="https://github.com/curl/curl/issues/8361">https://github.com/curl/curl/issues/8361</a></p>
<h3 id="unicode-on-windows">Unicode on Windows</h3>
<p>Passing in a Unicode filename with <code>-o</code>:</p>
<p>See <a
href="https://github.com/curl/curl/issues/11461">https://github.com/curl/curl/issues/11461</a></p>
<p>Passing in Unicode character with <code>-d</code>:</p>
<p>See <a
href="https://github.com/curl/curl/issues/12231">https://github.com/curl/curl/issues/12231</a></p>
<p>Windows Unicode builds use homedir in current locale</p>
<p>The Windows Unicode builds use the current locale, but expect Unicode
UTF-8 encoded paths for internal use such as <code>open</code>,
<code>access</code> and <code>stat</code>. The user's home directory is
retrieved via <code>curl_getenv</code> in the current locale and not as
UTF-8 encoded Unicode. See:</p>
<ul>
<li><a
href="https://github.com/curl/curl/pull/7252">https://github.com/curl/curl/pull/7252</a></li>
<li><a
href="https://github.com/curl/curl/pull/7281">https://github.com/curl/curl/pull/7281</a></li>
</ul>
<p>Cannot handle Unicode arguments in non-Unicode builds on Windows</p>
<p>If a URL or filename cannot be encoded using the user's current
codepage then it can only be encoded properly in the Unicode character
set. Windows uses UTF-16 encoding for Unicode and stores it in wide
characters, however curl and libcurl are not equipped for that at the
moment except when built with <code>_UNICODE</code> and
<code>UNICODE</code> defined. Except for Cygwin, Windows cannot use
UTF-8 as a locale. See:</p>
<ul>
<li><a
href="https://curl.se/bug/?i=345">https://curl.se/bug/?i=345</a></li>
<li><a
href="https://curl.se/bug/?i=731">https://curl.se/bug/?i=731</a></li>
<li><a
href="https://curl.se/bug/?i=3747NTLM">https://curl.se/bug/?i=3747NTLM</a>
authentication and Unicode</li>
</ul>
<p>NTLM authentication involving Unicode username or password only works
properly if built with <code>UNICODE</code> defined together with the
Schannel backend. The original problem was mentioned in:</p>
<ul>
<li><a
href="https://curl.se/mail/lib-2009-10/0024.html">https://curl.se/mail/lib-2009-10/0024.html</a></li>
<li><a
href="https://curl.se/bug/view.cgi?id=896">https://curl.se/bug/view.cgi?id=896</a></li>
</ul>
<p>The Schannel version verified to work as mentioned in <a
href="https://curl.se/mail/lib-2012-07/0073.html">https://curl.se/mail/lib-2012-07/0073.html</a></p>
<h2 id="authentication">Authentication</h2>
<h3 id="digest-auth-int-for-putpost">Digest auth-int for PUT/POST</h3>
<p>We do not support auth-int for Digest using <code>PUT</code> or
<code>POST</code></p>
<h3 id="mit-kerberos-for-windows-build">MIT Kerberos for Windows
build</h3>
<p>libcurl fails to build with MIT Kerberos for Windows
(<code>KfW</code>) due to <code>KfW</code>'s library header files
exporting symbols/macros that should be kept private to the
<code>KfW</code> library.</p>
<p>See ticket #5601 at <a
href="https://krbdev.mit.edu/rt/">https://krbdev.mit.edu/rt/</a></p>
<h3 id="ntlm-in-system-context-uses-wrong-name">NTLM in system context
uses wrong name</h3>
<p>NTLM authentication using SSPI (on Windows) when (lib)curl is running
in "system context" makes it use wrong(?) username - at least when
compared to what winhttp does.</p>
<p>See <a
href="https://curl.se/bug/view.cgi?id=535">https://curl.se/bug/view.cgi?id=535</a></p>
<h3
id="ntlm-does-not-support-password-with-unicode-section-sign-character">NTLM
does not support password with Unicode 'SECTION SIGN' character</h3>
<p>See:</p>
<ul>
<li><a
href="https://en.wikipedia.org/wiki/Section_sign">en.wikipedia.org/Section_sign</a></li>
<li><a href="https://codepoints.net/U+00A7">codepoints.net/U+00A7</a>
SECTION SIGN</li>
<li><a
href="https://github.com/curl/curl/issues/2120">https://github.com/curl/curl/issues/2120</a></li>
</ul>
<h3 id="libcurl-can-fail-to-try-alternatives-with---proxy-any">libcurl
can fail to try alternatives with --proxy-any</h3>
<p>When connecting via a proxy using <code>--proxy-any</code>, a failure
to establish an authentication causes libcurl to abort trying other
options if the failed method has a higher preference than the
alternatives. As an example, <code>--proxy-any</code> against a proxy
which advertise Negotiate and NTLM, but which fails to set up Kerberos
authentication does not proceed to try authentication using NTLM.</p>
<p>See <a
href="https://github.com/curl/curl/issues/876">https://github.com/curl/curl/issues/876</a></p>
<h3 id="do-not-clear-digest-for-single-realm">Do not clear digest for
single realm</h3>
<p>See <a
href="https://github.com/curl/curl/issues/3267">https://github.com/curl/curl/issues/3267</a></p>
<h3 id="sha-256-digest-not-supported-in-windows-sspi-builds">SHA-256
digest not supported in Windows SSPI builds</h3>
<p>Windows builds of curl that have SSPI enabled use the native Windows
API calls to create authentication strings. The call to
<code>InitializeSecurityContext</code> fails with
<code>SEC_E_QOP_NOT_SUPPORTED</code> which causes curl to fail with
<code>CURLE_AUTH_ERROR</code>.</p>
<p>Microsoft does not document supported digest algorithms and that
SEC_E error code is not a documented error for
<code>InitializeSecurityContext</code> (digest).</p>
<p>See <a
href="https://github.com/curl/curl/issues/6302">https://github.com/curl/curl/issues/6302</a></p>
<h3 id="curl-never-completes-negotiate-over-http">curl never completes
Negotiate over HTTP</h3>
<p>Apparently it is not working correctly...?</p>
<p>See <a
href="https://github.com/curl/curl/issues/5235">https://github.com/curl/curl/issues/5235</a></p>
<h3 id="negotiate-on-windows-fails">Negotiate on Windows fails</h3>
<p>When using <code>--negotiate</code> (or NTLM) with curl on Windows,
SSL/TLS handshake fails despite having a valid kerberos ticket cached.
Works without any issue in Unix/Linux.</p>
<p>See <a
href="https://github.com/curl/curl/issues/5881">https://github.com/curl/curl/issues/5881</a></p>
<h3 id="negotiate-against-hadoop-hdfs">Negotiate against Hadoop
HDFS</h3>
<p>See <a
href="https://github.com/curl/curl/issues/8264">https://github.com/curl/curl/issues/8264</a></p>
<h2 id="ftp">FTP</h2>
<h3 id="ftp-with-acct">FTP with ACCT</h3>
<p>When doing an operation over FTP that requires the <code>ACCT</code>
command (but not when logging in), the operation fails since libcurl
does not detect this and thus fails to issue the correct command.</p>
<p>See <a
href="https://curl.se/bug/view.cgi?id=635">https://curl.se/bug/view.cgi?id=635</a></p>
<h3 id="ftps-directory-listing-hangs-on-windows-with-schannel">FTPS
directory listing hangs on Windows with Schannel</h3>
<p>FTPS is not widely used with the Schannel TLS backend and so there
may be more bugs compared to other TLS backends such as OpenSSL. In the
past users have reported hanging and failed connections. It is likely
some changes to curl since then fixed the issues. None of the reported
issues can be reproduced any longer.</p>
<p>If you encounter an issue connecting to your server via FTPS with the
latest curl and Schannel then please search for open issues or file a
new issue.</p>
<h2 id="sftp-and-scp">SFTP and SCP</h2>
<h3 id="sftp-does-not-do-curlopt_postquote-correct">SFTP does not do
CURLOPT_POSTQUOTE correct</h3>
<p>When libcurl sends <code>CURLOPT_POSTQUOTE</code> commands when
connected to an SFTP server using the multi interface, the commands are
not being sent correctly and instead the connection is "cancelled" (the
operation is considered done) prematurely. There is a half-baked
(busy-looping) patch provided in the bug report but it cannot be
accepted as-is.</p>
<p>See <a
href="https://curl.se/bug/view.cgi?id=748">https://curl.se/bug/view.cgi?id=748</a></p>
<h3 id="remote-recursive-folder-creation-with-sftp">Remote recursive
folder creation with SFTP</h3>
<p>On this servers, the curl fails to create directories on the remote
server even when the <code>CURLOPT_FTP_CREATE_MISSING_DIRS</code> option
is set.</p>
<p>See <a
href="https://github.com/curl/curl/issues/5204">https://github.com/curl/curl/issues/5204</a></p>
<h3 id="libssh-blocking-and-infinite-loop-problem">libssh blocking and
infinite loop problem</h3>
<p>In the <code>SSH_SFTP_INIT</code> state for libssh, the ssh session
working mode is set to blocking mode. If the network is suddenly
disconnected during sftp transmission, curl is stuck, even if curl is
configured with a timeout.</p>
<p>See <a
href="https://github.com/curl/curl/issues/8632">https://github.com/curl/curl/issues/8632</a></p>
<h3 id="cygwin-warning-unprotected-private-key-file">Cygwin: "WARNING:
UNPROTECTED PRIVATE KEY FILE!"</h3>
<p>Running SCP and SFTP tests on Cygwin makes this warning message
appear.</p>
<p>See <a
href="https://github.com/curl/curl/issues/11244">https://github.com/curl/curl/issues/11244</a></p>
<h2 id="connection">Connection</h2>
<h3 id="--interface-with-link-scoped-ipv6-address">--interface with
link-scoped IPv6 address</h3>
<p>When you give the <code>--interface</code> option telling curl to use
a specific interface for its outgoing traffic in combination with an
IPv6 address in the URL that uses a link-local scope, curl might pick
the wrong address from the named interface and the subsequent transfer
fails.</p>
<p>Example command line:</p>
<pre><code>curl --interface eth0 &#39;http://[fe80:928d:xxff:fexx:xxxx]/&#39;</code></pre>
<p>The fact that the given IP address is link-scoped should probably be
used as input to somehow make curl make a better choice for this.</p>
<p>See <a
href="https://github.com/curl/curl/issues/14782">https://github.com/curl/curl/issues/14782</a></p>
<h3 id="does-not-acknowledge-getaddrinfo-sorting-policy">Does not
acknowledge getaddrinfo sorting policy</h3>
<p>Even if a user edits <code>/etc/gai.conf</code> to prefer IPv4, curl
still prefers and tries IPv6 addresses first.</p>
<p>See <a
href="https://github.com/curl/curl/issues/16718">https://github.com/curl/curl/issues/16718</a></p>
<h3 id="socks-sspi-discards-the-security-context">SOCKS-SSPI discards
the security context</h3>
<p>After a successful SSPI/GSS-API exchange, the function queries and
logs the authenticated username and reports the supported
data-protection level, but then immediately deletes the negotiated SSPI
security context and frees the credentials before returning. The
negotiated context is not stored on the connection and is therefore
never used to protect later SOCKS5 traffic.</p>
<h2 id="internals">Internals</h2>
<h3
id="gssapi-library-name--version-is-missing-in-curl_version_info">gssapi
library name + version is missing in curl_version_info()</h3>
<p>The struct needs to be expanded and code added to store this
info.</p>
<p>See <a
href="https://github.com/curl/curl/issues/13492">https://github.com/curl/curl/issues/13492</a></p>
<h3
id="error-buffer-not-set-if-connection-to-multiple-addresses-fails">error
buffer not set if connection to multiple addresses fails</h3>
<p>If you ask libcurl to resolve a hostname like example.com to IPv6
addresses when you only have IPv4 connectivity. libcurl fails with
<code>CURLE_COULDNT_CONNECT</code>, but the error buffer set by
<code>CURLOPT_ERRORBUFFER</code> remains empty.</p>
<p>See issue: <a
href="https://github.com/curl/curl/issues/544">https://github.com/curl/curl/issues/544</a></p>
<h3 id="http-test-server-connection-monitor-problems">HTTP test server
'connection-monitor' problems</h3>
<p>The "connection-monitor" feature of the <code>sws</code> HTTP test
server does not work properly if some tests are run in unexpected order.
Like 1509 and then 1525.</p>
<p>See <a
href="https://github.com/curl/curl/issues/868">https://github.com/curl/curl/issues/868</a></p>
<h3 id="connection-information-when-using-tcp-fast-open">Connection
information when using TCP Fast Open</h3>
<p><code>CURLINFO_LOCAL_PORT</code> (and possibly a few other) fails
when TCP Fast Open is enabled. See:</p>
<ul>
<li><a
href="https://github.com/curl/curl/issues/1332">https://github.com/curl/curl/issues/1332</a></li>
<li><a
href="https://github.com/curl/curl/issues/4296">https://github.com/curl/curl/issues/4296</a></li>
</ul>
<h3 id="test-cases-sometimes-timeout">test cases sometimes timeout</h3>
<p>Occasionally, one of the tests timeouts. Inexplicably.</p>
<p>See <a
href="https://github.com/curl/curl/issues/13350">https://github.com/curl/curl/issues/13350</a></p>
<h3
id="curlopt_connect_to-does-not-work-for-https-proxy">CURLOPT_CONNECT_TO
does not work for HTTPS proxy</h3>
<p>It is unclear if the same option should even cover the proxy
connection or if if requires a separate option.</p>
<p>See <a
href="https://github.com/curl/curl/issues/14481">https://github.com/curl/curl/issues/14481</a></p>
<h3 id="winidn-test-failures">WinIDN test failures</h3>
<p>Test 165 disabled when built with WinIDN.</p>
<h3
id="setting-a-disabled-option-should-return-curle_not_built_in">setting
a disabled option should return CURLE_NOT_BUILT_IN</h3>
<p>When curl has been built with specific features or protocols
disabled, setting such options with <code>curl_easy_setopt()</code>
should rather return <code>CURLE_NOT_BUILT_IN</code> instead of
<code>CURLE_UNKNOWN_OPTION</code> to signal the difference to the
application.</p>
<p>See <a
href="https://github.com/curl/curl/issues/15472">https://github.com/curl/curl/issues/15472</a></p>
<h2 id="ldap">LDAP</h2>
<h3 id="openldap-hangs-after-returning-results">OpenLDAP hangs after
returning results</h3>
<p>By configuration defaults, OpenLDAP automatically chase referrals on
secondary socket descriptors. The OpenLDAP backend is asynchronous and
thus should monitor all socket descriptors involved. Currently, these
secondary descriptors are not monitored, causing OpenLDAP library to
never receive data from them.</p>
<p>As a temporary workaround, disable referrals chasing by
configuration.</p>
<p>The fix is not easy: proper automatic referrals chasing requires a
synchronous bind callback and monitoring an arbitrary number of socket
descriptors for a single easy handle (currently limited to 5).</p>
<p>Generic LDAP is synchronous: OK. See:</p>
<ul>
<li><a
href="https://github.com/curl/curl/issues/622">https://github.com/curl/curl/issues/622</a></li>
<li><a
href="https://curl.se/mail/lib-2016-01/0101.html">https://curl.se/mail/lib-2016-01/0101.html</a></li>
</ul>
<h3 id="ldap-on-windows-does-authentication-wrong">LDAP on Windows does
authentication wrong?</h3>
<p>See <a
href="https://github.com/curl/curl/issues/3116">https://github.com/curl/curl/issues/3116</a></p>
<h3 id="ldap-on-windows-does-not-work">LDAP on Windows does not
work</h3>
<p>A simple curl command line getting "ldap://ldap.forumsys.com" returns
an error that says "no memory" !</p>
<p>See <a
href="https://github.com/curl/curl/issues/4261">https://github.com/curl/curl/issues/4261</a></p>
<h3 id="ldaps-requests-to-activedirectory-server-hang">LDAPS requests to
ActiveDirectory server hang</h3>
<p>See <a
href="https://github.com/curl/curl/issues/9580">https://github.com/curl/curl/issues/9580</a></p>
<h2 id="tcpip">TCP/IP</h2>
<h3 id="telnet-code-does-not-handle-partial-writes-properly">telnet code
does not handle partial writes properly</h3>
<p>It probably does not happen too easily because of how slow and
infrequent sends are normally performed.</p>
<h3 id="trying-local-ports-fails-on-windows">Trying local ports fails on
Windows</h3>
<p>This makes <code>--local-port [range]</code> to not work since curl
cannot properly detect if a port is already in use, so it tries the
first port, uses that and then subsequently fails anyway if that was
actually in use.</p>
<p>See <a
href="https://github.com/curl/curl/issues/8112">https://github.com/curl/curl/issues/8112</a></p>
<h2 id="cmake">CMake</h2>
<h3 id="cmake-outputs-no-version-information-available">cmake outputs:
no version information available</h3>
<p>Something in the <code>SONAME</code> generation seems to be wrong in
the cmake build.</p>
<p>See <a
href="https://github.com/curl/curl/issues/11158">https://github.com/curl/curl/issues/11158</a></p>
<h3 id="uses--lpthread-instead-of-threadsthreads">uses -lpthread instead
of Threads::Threads</h3>
<p>See <a
href="https://github.com/curl/curl/issues/6166">https://github.com/curl/curl/issues/6166</a></p>
<h3 id="generated-pc-file-contains-strange-entries">generated .pc file
contains strange entries</h3>
<p>The <code>Libs.private</code> field of the generated <code>.pc</code>
file contains <code>-lgcc</code> <code>-lgcc_s</code> <code>-lc</code>
<code>-lgcc</code> <code>-lgcc_s</code>.</p>
<p>See <a
href="https://github.com/curl/curl/issues/6167">https://github.com/curl/curl/issues/6167</a></p>
<h3 id="cmake-build-with-mit-kerberos-does-not-work">CMake build with
MIT Kerberos does not work</h3>
<p>Minimum CMake version was bumped in curl 7.71.0 (#5358) Since CMake
3.2 try_compile started respecting the <code>CMAKE_EXE_FLAGS</code>. The
code dealing with MIT Kerberos detection sets few variables to
potentially weird mix of space, and ;-separated flags. It had to blow up
at some point. All the CMake checks that involve compilation are doomed
from that point, the configured tree cannot be built.</p>
<p>See <a
href="https://github.com/curl/curl/issues/6904">https://github.com/curl/curl/issues/6904</a></p>
<h2 id="aws-sigv4">aws-sigv4</h2>
<h3
id="aws-sigv4-does-not-handle-multipartform-data-correctly">aws-sigv4
does not handle multipart/form-data correctly</h3>
<p>See <a
href="https://github.com/curl/curl/issues/13351">https://github.com/curl/curl/issues/13351</a></p>
<h2 id="http2">HTTP/2</h2>
<h3 id="http2-prior-knowledge-over-proxy">HTTP/2 prior knowledge over
proxy</h3>
<p>See <a
href="https://github.com/curl/curl/issues/12641">https://github.com/curl/curl/issues/12641</a></p>
<h3 id="http2-frames-while-in-the-connection-pool-kill-reuse">HTTP/2
frames while in the connection pool kill reuse</h3>
<p>If the server sends HTTP/2 frames (like for example an HTTP/2
<code>PING</code> frame) to curl while the connection is held in curl's
connection pool, the socket is found readable when considered for reuse
and that makes curl think it is dead and then it is closed and a new
connection gets created instead.</p>
<p>This is <em>best</em> fixed by adding monitoring to connections while
they are kept in the pool so that pings can be responded to
appropriately.</p>
<h3 id="enhance_your_calm-causes-infinite-retries">ENHANCE_YOUR_CALM
causes infinite retries</h3>
<p>Infinite retries with 2 parallel requests on one connection receiving
<code>GOAWAY</code> with <code>ENHANCE_YOUR_CALM</code> error code.</p>
<p>See <a
href="https://github.com/curl/curl/issues/5119">https://github.com/curl/curl/issues/5119</a></p>
<h3 id="http2--tls-spends-a-lot-of-time-in-recv">HTTP/2 + TLS spends a
lot of time in recv</h3>
<p>It has been observed that by making the speed limit less accurate we
could improve this performance. (by reverting <a
href="https://github.com/curl/curl/commit/db5c9f4f9e0779b49624752b135281a0717b277b">https://github.com/curl/curl/commit/db5c9f4f9e0779b49624752b135281a0717b277b</a>
) Can we find a golden middle ground? See:</p>
<ul>
<li><a
href="https://curl.se/mail/lib-2024-05/0026.html">https://curl.se/mail/lib-2024-05/0026.html</a></li>
<li><a
href="https://github.com/curl/curl/issues/13416">https://github.com/curl/curl/issues/13416</a></li>
</ul>
<h2 id="http3">HTTP/3</h2>
<h3 id="connection-migration-does-not-work">connection migration does
not work</h3>
<p>See <a
href="https://github.com/curl/curl/issues/7695">https://github.com/curl/curl/issues/7695</a></p>
<h3 id="quiche-quic-connection-is-draining">quiche: QUIC connection is
draining</h3>
<p>The transfer ends with error "QUIC connection is draining".</p>
<p>See <a
href="https://github.com/curl/curl/issues/12037">https://github.com/curl/curl/issues/12037</a></p>
<h3 id="openssl-quic-problems-on-googlecom">OpenSSL-QUIC problems on
google.com</h3>
<p>With some specific Google servers, and seemingly timing dependent,
the OpenSSL-QUIC backend seems to not actually send off the HTTP/3
request which makes the QUIC connection just sit idle until killed by
the server. curl or OpenSSL bug?</p>
<p>See <a
href="https://github.com/curl/curl/issues/18336">https://github.com/curl/curl/issues/18336</a></p>
<h2 id="rtsp">RTSP</h2>
<h3 id="some-methods-do-not-support-response-bodies">Some methods do not
support response bodies</h3>
<p>The RTSP implementation is written to assume that a number of RTSP
methods always get responses without bodies, even though there seems to
be no indication in the RFC that this is always the case.</p>
<p>See <a
href="https://github.com/curl/curl/issues/12414">https://github.com/curl/curl/issues/12414</a></p>
</div>
</div>
</body>
</html>
